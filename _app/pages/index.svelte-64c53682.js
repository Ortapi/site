var co=Object.defineProperty,ho=Object.defineProperties;var po=Object.getOwnPropertyDescriptors;var gn=Object.getOwnPropertySymbols;var yo=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable;var vn=(t,e,r)=>e in t?co(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ft=(t,e)=>{for(var r in e||(e={}))yo.call(e,r)&&vn(t,r,e[r]);if(gn)for(var r of gn(e))go.call(e,r)&&vn(t,r,e[r]);return t},Ut=(t,e)=>ho(t,po(e));import{S as vo,i as bo,s as wo,e as Xe,t as bn,k as vr,c as Je,a as Ze,h as wn,d as oe,m as br,b as vt,g as je,I as Dt,n as wr}from"../chunks/index-1bbfa128.js";var Ct=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Yn(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}var nr={exports:{}},_o={},mo=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),ge=Yn(mo),Wr=So,Eo=Object.prototype.hasOwnProperty;function So(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)Eo.call(r,n)&&(t[n]=r[n])}return t}var ke={exports:{}},Xn=ge.EventEmitter,Ie={},ir={};ir.byteLength=xo;ir.toByteArray=Ao;ir.fromByteArray=Ro;var be=[],le=[],To=typeof Uint8Array!="undefined"?Uint8Array:Array,_r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var et=0,Co=_r.length;et<Co;++et)be[et]=_r[et],le[_r.charCodeAt(et)]=et;le["-".charCodeAt(0)]=62;le["_".charCodeAt(0)]=63;function Jn(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function xo(t){var e=Jn(t),r=e[0],n=e[1];return(r+n)*3/4-n}function ko(t,e,r){return(e+r)*3/4-r}function Ao(t){var e,r=Jn(t),n=r[0],i=r[1],o=new To(ko(t,n,i)),s=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=le[t.charCodeAt(c)]<<18|le[t.charCodeAt(c+1)]<<12|le[t.charCodeAt(c+2)]<<6|le[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=le[t.charCodeAt(c)]<<2|le[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=le[t.charCodeAt(c)]<<10|le[t.charCodeAt(c+1)]<<4|le[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Io(t){return be[t>>18&63]+be[t>>12&63]+be[t>>6&63]+be[t&63]}function Bo(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(Io(n));return i.join("")}function Ro(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(Bo(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(be[e>>2]+be[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(be[e>>10]+be[e>>4&63]+be[e<<2&63]+"=")),i.join("")}var Kr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Kr.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,c=(1<<a)-1,l=c>>1,g=-7,p=r?i-1:0,y=r?-1:1,w=t[e+p];for(p+=y,o=w&(1<<-g)-1,w>>=-g,g+=a;g>0;o=o*256+t[e+p],p+=y,g-=8);for(s=o&(1<<-g)-1,o>>=-g,g+=n;g>0;s=s*256+t[e+p],p+=y,g-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:(w?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-l}return(w?-1:1)*s*Math.pow(2,o-n)};Kr.write=function(t,e,r,n,i,o){var s,a,c,l=o*8-i-1,g=(1<<l)-1,p=g>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:o-1,S=n?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=g):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+p>=1?e+=y/c:e+=y*Math.pow(2,1-p),e*c>=2&&(s++,c/=2),s+p>=g?(a=0,s=g):s+p>=1?(a=(e*c-1)*Math.pow(2,i),s=s+p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;t[r+w]=a&255,w+=S,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[r+w]=s&255,w+=S,s/=256,l-=8);t[r+w-S]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=ir,r=Kr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=h,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var v=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(v,f),v.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function s(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');var f=new Uint8Array(v);return Object.setPrototypeOf(f,a.prototype),f}function a(v,f,u){if(typeof v=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(v)}return c(v,f,u)}a.poolSize=8192;function c(v,f,u){if(typeof v=="string")return y(v,f);if(ArrayBuffer.isView(v))return S(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(ve(v,ArrayBuffer)||v&&ve(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ve(v,SharedArrayBuffer)||v&&ve(v.buffer,SharedArrayBuffer)))return E(v,f,u);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var b=v.valueOf&&v.valueOf();if(b!=null&&b!==v)return a.from(b,f,u);var m=I(v);if(m)return m;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return a.from(v[Symbol.toPrimitive]("string"),f,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}a.from=function(v,f,u){return c(v,f,u)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function g(v,f,u){return l(v),v<=0?s(v):f!==void 0?typeof u=="string"?s(v).fill(f,u):s(v).fill(f):s(v)}a.alloc=function(v,f,u){return g(v,f,u)};function p(v){return l(v),s(v<0?0:B(v)|0)}a.allocUnsafe=function(v){return p(v)},a.allocUnsafeSlow=function(v){return p(v)};function y(v,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);var u=d(v,f)|0,b=s(u),m=b.write(v,f);return m!==u&&(b=b.slice(0,m)),b}function w(v){for(var f=v.length<0?0:B(v.length)|0,u=s(f),b=0;b<f;b+=1)u[b]=v[b]&255;return u}function S(v){if(ve(v,Uint8Array)){var f=new Uint8Array(v);return E(f.buffer,f.byteOffset,f.byteLength)}return w(v)}function E(v,f,u){if(f<0||v.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<f+(u||0))throw new RangeError('"length" is outside of buffer bounds');var b;return f===void 0&&u===void 0?b=new Uint8Array(v):u===void 0?b=new Uint8Array(v,f):b=new Uint8Array(v,f,u),Object.setPrototypeOf(b,a.prototype),b}function I(v){if(a.isBuffer(v)){var f=B(v.length)|0,u=s(f);return u.length===0||v.copy(u,0,0,f),u}if(v.length!==void 0)return typeof v.length!="number"||gr(v.length)?s(0):w(v);if(v.type==="Buffer"&&Array.isArray(v.data))return w(v.data)}function B(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function h(v){return+v!=v&&(v=0),a.alloc(+v)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,u){if(ve(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),ve(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(f)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===u)return 0;for(var b=f.length,m=u.length,k=0,A=Math.min(b,m);k<A;++k)if(f[k]!==u[k]){b=f[k],m=u[k];break}return b<m?-1:m<b?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,u){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);var b;if(u===void 0)for(u=0,b=0;b<f.length;++b)u+=f[b].length;var m=a.allocUnsafe(u),k=0;for(b=0;b<f.length;++b){var A=f[b];if(ve(A,Uint8Array))k+A.length>m.length?a.from(A).copy(m,k):Uint8Array.prototype.set.call(m,A,k);else if(a.isBuffer(A))A.copy(m,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=A.length}return m};function d(v,f){if(a.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||ve(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);var u=v.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&u===0)return 0;for(var m=!1;;)switch(f){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return yr(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return pn(v).length;default:if(m)return b?-1:yr(v).length;f=(""+f).toLowerCase(),m=!0}}a.byteLength=d;function _(v,f,u){var b=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,f>>>=0,u<=f))return"";for(v||(v="utf8");;)switch(v){case"hex":return io(this,f,u);case"utf8":case"utf-8":return ln(this,f,u);case"ascii":return ro(this,f,u);case"latin1":case"binary":return no(this,f,u);case"base64":return eo(this,f,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oo(this,f,u);default:if(b)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),b=!0}}a.prototype._isBuffer=!0;function C(v,f,u){var b=v[f];v[f]=v[u],v[u]=b}a.prototype.swap16=function(){var f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<f;u+=2)C(this,u,u+1);return this},a.prototype.swap32=function(){var f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<f;u+=4)C(this,u,u+3),C(this,u+1,u+2);return this},a.prototype.swap64=function(){var f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<f;u+=8)C(this,u,u+7),C(this,u+1,u+6),C(this,u+2,u+5),C(this,u+3,u+4);return this},a.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?ln(this,0,f):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){var f="",u=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(f+=" ... "),"<Buffer "+f+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(f,u,b,m,k){if(ve(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(u===void 0&&(u=0),b===void 0&&(b=f?f.length:0),m===void 0&&(m=0),k===void 0&&(k=this.length),u<0||b>f.length||m<0||k>this.length)throw new RangeError("out of range index");if(m>=k&&u>=b)return 0;if(m>=k)return-1;if(u>=b)return 1;if(u>>>=0,b>>>=0,m>>>=0,k>>>=0,this===f)return 0;for(var A=k-m,F=b-u,$=Math.min(A,F),V=this.slice(m,k),ee=f.slice(u,b),H=0;H<$;++H)if(V[H]!==ee[H]){A=V[H],F=ee[H];break}return A<F?-1:F<A?1:0};function M(v,f,u,b,m){if(v.length===0)return-1;if(typeof u=="string"?(b=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,gr(u)&&(u=m?0:v.length-1),u<0&&(u=v.length+u),u>=v.length){if(m)return-1;u=v.length-1}else if(u<0)if(m)u=0;else return-1;if(typeof f=="string"&&(f=a.from(f,b)),a.isBuffer(f))return f.length===0?-1:j(v,f,u,b,m);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(v,f,u):Uint8Array.prototype.lastIndexOf.call(v,f,u):j(v,[f],u,b,m);throw new TypeError("val must be string, number or Buffer")}function j(v,f,u,b,m){var k=1,A=v.length,F=f.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(v.length<2||f.length<2)return-1;k=2,A/=2,F/=2,u/=2}function $(dn,yn){return k===1?dn[yn]:dn.readUInt16BE(yn*k)}var V;if(m){var ee=-1;for(V=u;V<A;V++)if($(v,V)===$(f,ee===-1?0:V-ee)){if(ee===-1&&(ee=V),V-ee+1===F)return ee*k}else ee!==-1&&(V-=V-ee),ee=-1}else for(u+F>A&&(u=A-F),V=u;V>=0;V--){for(var H=!0,Lt=0;Lt<F;Lt++)if($(v,V+Lt)!==$(f,Lt)){H=!1;break}if(H)return V}return-1}a.prototype.includes=function(f,u,b){return this.indexOf(f,u,b)!==-1},a.prototype.indexOf=function(f,u,b){return M(this,f,u,b,!0)},a.prototype.lastIndexOf=function(f,u,b){return M(this,f,u,b,!1)};function ae(v,f,u,b){u=Number(u)||0;var m=v.length-u;b?(b=Number(b),b>m&&(b=m)):b=m;var k=f.length;b>k/2&&(b=k/2);for(var A=0;A<b;++A){var F=parseInt(f.substr(A*2,2),16);if(gr(F))return A;v[u+A]=F}return A}function he(v,f,u,b){return Ot(yr(f,v.length-u),v,u,b)}function Xi(v,f,u,b){return Ot(lo(f),v,u,b)}function Ji(v,f,u,b){return Ot(pn(f),v,u,b)}function Zi(v,f,u,b){return Ot(fo(f,v.length-u),v,u,b)}a.prototype.write=function(f,u,b,m){if(u===void 0)m="utf8",b=this.length,u=0;else if(b===void 0&&typeof u=="string")m=u,b=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(b)?(b=b>>>0,m===void 0&&(m="utf8")):(m=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var k=this.length-u;if((b===void 0||b>k)&&(b=k),f.length>0&&(b<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");for(var A=!1;;)switch(m){case"hex":return ae(this,f,u,b);case"utf8":case"utf-8":return he(this,f,u,b);case"ascii":case"latin1":case"binary":return Xi(this,f,u,b);case"base64":return Ji(this,f,u,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zi(this,f,u,b);default:if(A)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),A=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function eo(v,f,u){return f===0&&u===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(f,u))}function ln(v,f,u){u=Math.min(v.length,u);for(var b=[],m=f;m<u;){var k=v[m],A=null,F=k>239?4:k>223?3:k>191?2:1;if(m+F<=u){var $,V,ee,H;switch(F){case 1:k<128&&(A=k);break;case 2:$=v[m+1],($&192)===128&&(H=(k&31)<<6|$&63,H>127&&(A=H));break;case 3:$=v[m+1],V=v[m+2],($&192)===128&&(V&192)===128&&(H=(k&15)<<12|($&63)<<6|V&63,H>2047&&(H<55296||H>57343)&&(A=H));break;case 4:$=v[m+1],V=v[m+2],ee=v[m+3],($&192)===128&&(V&192)===128&&(ee&192)===128&&(H=(k&15)<<18|($&63)<<12|(V&63)<<6|ee&63,H>65535&&H<1114112&&(A=H))}}A===null?(A=65533,F=1):A>65535&&(A-=65536,b.push(A>>>10&1023|55296),A=56320|A&1023),b.push(A),m+=F}return to(b)}var fn=4096;function to(v){var f=v.length;if(f<=fn)return String.fromCharCode.apply(String,v);for(var u="",b=0;b<f;)u+=String.fromCharCode.apply(String,v.slice(b,b+=fn));return u}function ro(v,f,u){var b="";u=Math.min(v.length,u);for(var m=f;m<u;++m)b+=String.fromCharCode(v[m]&127);return b}function no(v,f,u){var b="";u=Math.min(v.length,u);for(var m=f;m<u;++m)b+=String.fromCharCode(v[m]);return b}function io(v,f,u){var b=v.length;(!f||f<0)&&(f=0),(!u||u<0||u>b)&&(u=b);for(var m="",k=f;k<u;++k)m+=uo[v[k]];return m}function oo(v,f,u){for(var b=v.slice(f,u),m="",k=0;k<b.length-1;k+=2)m+=String.fromCharCode(b[k]+b[k+1]*256);return m}a.prototype.slice=function(f,u){var b=this.length;f=~~f,u=u===void 0?b:~~u,f<0?(f+=b,f<0&&(f=0)):f>b&&(f=b),u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),u<f&&(u=f);var m=this.subarray(f,u);return Object.setPrototypeOf(m,a.prototype),m};function Q(v,f,u){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+f>u)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,u,b){f=f>>>0,u=u>>>0,b||Q(f,u,this.length);for(var m=this[f],k=1,A=0;++A<u&&(k*=256);)m+=this[f+A]*k;return m},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,u,b){f=f>>>0,u=u>>>0,b||Q(f,u,this.length);for(var m=this[f+--u],k=1;u>0&&(k*=256);)m+=this[f+--u]*k;return m},a.prototype.readUint8=a.prototype.readUInt8=function(f,u){return f=f>>>0,u||Q(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,u){return f=f>>>0,u||Q(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,u){return f=f>>>0,u||Q(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,u){return f=f>>>0,u||Q(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,u){return f=f>>>0,u||Q(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readIntLE=function(f,u,b){f=f>>>0,u=u>>>0,b||Q(f,u,this.length);for(var m=this[f],k=1,A=0;++A<u&&(k*=256);)m+=this[f+A]*k;return k*=128,m>=k&&(m-=Math.pow(2,8*u)),m},a.prototype.readIntBE=function(f,u,b){f=f>>>0,u=u>>>0,b||Q(f,u,this.length);for(var m=u,k=1,A=this[f+--m];m>0&&(k*=256);)A+=this[f+--m]*k;return k*=128,A>=k&&(A-=Math.pow(2,8*u)),A},a.prototype.readInt8=function(f,u){return f=f>>>0,u||Q(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,u){f=f>>>0,u||Q(f,2,this.length);var b=this[f]|this[f+1]<<8;return b&32768?b|4294901760:b},a.prototype.readInt16BE=function(f,u){f=f>>>0,u||Q(f,2,this.length);var b=this[f+1]|this[f]<<8;return b&32768?b|4294901760:b},a.prototype.readInt32LE=function(f,u){return f=f>>>0,u||Q(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,u){return f=f>>>0,u||Q(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readFloatLE=function(f,u){return f=f>>>0,u||Q(f,4,this.length),r.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,u){return f=f>>>0,u||Q(f,4,this.length),r.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,u){return f=f>>>0,u||Q(f,8,this.length),r.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,u){return f=f>>>0,u||Q(f,8,this.length),r.read(this,f,!1,52,8)};function ne(v,f,u,b,m,k){if(!a.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>m||f<k)throw new RangeError('"value" argument is out of bounds');if(u+b>v.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,u,b,m){if(f=+f,u=u>>>0,b=b>>>0,!m){var k=Math.pow(2,8*b)-1;ne(this,f,u,b,k,0)}var A=1,F=0;for(this[u]=f&255;++F<b&&(A*=256);)this[u+F]=f/A&255;return u+b},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,u,b,m){if(f=+f,u=u>>>0,b=b>>>0,!m){var k=Math.pow(2,8*b)-1;ne(this,f,u,b,k,0)}var A=b-1,F=1;for(this[u+A]=f&255;--A>=0&&(F*=256);)this[u+A]=f/F&255;return u+b},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,1,255,0),this[u]=f&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,2,65535,0),this[u]=f&255,this[u+1]=f>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,2,65535,0),this[u]=f>>>8,this[u+1]=f&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,4,4294967295,0),this[u+3]=f>>>24,this[u+2]=f>>>16,this[u+1]=f>>>8,this[u]=f&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,4,4294967295,0),this[u]=f>>>24,this[u+1]=f>>>16,this[u+2]=f>>>8,this[u+3]=f&255,u+4},a.prototype.writeIntLE=function(f,u,b,m){if(f=+f,u=u>>>0,!m){var k=Math.pow(2,8*b-1);ne(this,f,u,b,k-1,-k)}var A=0,F=1,$=0;for(this[u]=f&255;++A<b&&(F*=256);)f<0&&$===0&&this[u+A-1]!==0&&($=1),this[u+A]=(f/F>>0)-$&255;return u+b},a.prototype.writeIntBE=function(f,u,b,m){if(f=+f,u=u>>>0,!m){var k=Math.pow(2,8*b-1);ne(this,f,u,b,k-1,-k)}var A=b-1,F=1,$=0;for(this[u+A]=f&255;--A>=0&&(F*=256);)f<0&&$===0&&this[u+A+1]!==0&&($=1),this[u+A]=(f/F>>0)-$&255;return u+b},a.prototype.writeInt8=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,1,127,-128),f<0&&(f=255+f+1),this[u]=f&255,u+1},a.prototype.writeInt16LE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,2,32767,-32768),this[u]=f&255,this[u+1]=f>>>8,u+2},a.prototype.writeInt16BE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,2,32767,-32768),this[u]=f>>>8,this[u+1]=f&255,u+2},a.prototype.writeInt32LE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,4,2147483647,-2147483648),this[u]=f&255,this[u+1]=f>>>8,this[u+2]=f>>>16,this[u+3]=f>>>24,u+4},a.prototype.writeInt32BE=function(f,u,b){return f=+f,u=u>>>0,b||ne(this,f,u,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[u]=f>>>24,this[u+1]=f>>>16,this[u+2]=f>>>8,this[u+3]=f&255,u+4};function un(v,f,u,b,m,k){if(u+b>v.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function cn(v,f,u,b,m){return f=+f,u=u>>>0,m||un(v,f,u,4),r.write(v,f,u,b,23,4),u+4}a.prototype.writeFloatLE=function(f,u,b){return cn(this,f,u,!0,b)},a.prototype.writeFloatBE=function(f,u,b){return cn(this,f,u,!1,b)};function hn(v,f,u,b,m){return f=+f,u=u>>>0,m||un(v,f,u,8),r.write(v,f,u,b,52,8),u+8}a.prototype.writeDoubleLE=function(f,u,b){return hn(this,f,u,!0,b)},a.prototype.writeDoubleBE=function(f,u,b){return hn(this,f,u,!1,b)},a.prototype.copy=function(f,u,b,m){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(b||(b=0),!m&&m!==0&&(m=this.length),u>=f.length&&(u=f.length),u||(u=0),m>0&&m<b&&(m=b),m===b||f.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),f.length-u<m-b&&(m=f.length-u+b);var k=m-b;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,b,m):Uint8Array.prototype.set.call(f,this.subarray(b,m),u),k},a.prototype.fill=function(f,u,b,m){if(typeof f=="string"){if(typeof u=="string"?(m=u,u=0,b=this.length):typeof b=="string"&&(m=b,b=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(f.length===1){var k=f.charCodeAt(0);(m==="utf8"&&k<128||m==="latin1")&&(f=k)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(u<0||this.length<u||this.length<b)throw new RangeError("Out of range index");if(b<=u)return this;u=u>>>0,b=b===void 0?this.length:b>>>0,f||(f=0);var A;if(typeof f=="number")for(A=u;A<b;++A)this[A]=f;else{var F=a.isBuffer(f)?f:a.from(f,m),$=F.length;if($===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(A=0;A<b-u;++A)this[A+u]=F[A%$]}return this};var so=/[^+/0-9A-Za-z-_]/g;function ao(v){if(v=v.split("=")[0],v=v.trim().replace(so,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function yr(v,f){f=f||1/0;for(var u,b=v.length,m=null,k=[],A=0;A<b;++A){if(u=v.charCodeAt(A),u>55295&&u<57344){if(!m){if(u>56319){(f-=3)>-1&&k.push(239,191,189);continue}else if(A+1===b){(f-=3)>-1&&k.push(239,191,189);continue}m=u;continue}if(u<56320){(f-=3)>-1&&k.push(239,191,189),m=u;continue}u=(m-55296<<10|u-56320)+65536}else m&&(f-=3)>-1&&k.push(239,191,189);if(m=null,u<128){if((f-=1)<0)break;k.push(u)}else if(u<2048){if((f-=2)<0)break;k.push(u>>6|192,u&63|128)}else if(u<65536){if((f-=3)<0)break;k.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((f-=4)<0)break;k.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return k}function lo(v){for(var f=[],u=0;u<v.length;++u)f.push(v.charCodeAt(u)&255);return f}function fo(v,f){for(var u,b,m,k=[],A=0;A<v.length&&!((f-=2)<0);++A)u=v.charCodeAt(A),b=u>>8,m=u%256,k.push(m),k.push(b);return k}function pn(v){return e.toByteArray(ao(v))}function Ot(v,f,u,b){for(var m=0;m<b&&!(m+u>=f.length||m>=v.length);++m)f[m+u]=v[m];return m}function ve(v,f){return v instanceof f||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===f.name}function gr(v){return v!==v}var uo=function(){for(var v="0123456789abcdef",f=new Array(256),u=0;u<16;++u)for(var b=u*16,m=0;m<16;++m)f[b+m]=v[u]+v[m];return f}()})(Ie);function _n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Po(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_n(Object(r),!0).forEach(function(n){Mo(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_n(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lo(t,e,r){return e&&mn(t.prototype,e),r&&mn(t,r),t}var Fo=Ie,Vt=Fo.Buffer,Uo=ge,Fr=Uo.inspect,Do=Fr&&Fr.custom||"inspect";function No(t,e,r){Vt.prototype.copy.call(t,e,r)}var jo=function(){function t(){Oo(this,t),this.head=null,this.tail=null,this.length=0}return Lo(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Vt.alloc(0);for(var n=Vt.allocUnsafe(r>>>0),i=this.head,o=0;i;)No(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=Vt.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:Do,value:function(r,n){return Fr(this,Po({},n,{depth:0,customInspect:!1}))}}]),t}();function qo(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Ur,this,t)):process.nextTick(Ur,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(Ht,r):(r._writableState.errorEmitted=!0,process.nextTick(En,r,o)):process.nextTick(En,r,o):e?(process.nextTick(Ht,r),e(o)):process.nextTick(Ht,r)}),this)}function En(t,e){Ur(t,e),Ht(t)}function Ht(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function $o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Ur(t,e){t.emit("error",e)}function zo(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var Zn={destroy:qo,undestroy:$o,errorOrDestroy:zo},Ye={};function Vo(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ei={};function ue(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){Vo(s,o);function s(a,c,l){return o.call(this,n(a,c,l))||this}return s}(r);i.prototype.name=r.name,i.prototype.code=t,ei[t]=i}function Sn(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Ho(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Wo(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Ko(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ue("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);ue("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Ho(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Wo(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Sn(e,"type"));else{var o=Ko(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(Sn(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);ue("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ue("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});ue("ERR_STREAM_PREMATURE_CLOSE","Premature close");ue("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});ue("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ue("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ue("ERR_STREAM_WRITE_AFTER_END","write after end");ue("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ue("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);ue("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Ye.codes=ei;var Qo=Ye.codes.ERR_INVALID_OPT_VALUE;function Go(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Yo(t,e,r,n){var i=Go(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new Qo(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var ti={getHighWaterMark:Yo},_e={exports:{}};typeof Object.create=="function"?_e.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:_e.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Xo=Jo;function Jo(t,e){if(mr("noDeprecation"))return t;var r=!1;function n(){if(!r){if(mr("throwDeprecation"))throw new Error(e);mr("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function mr(t){try{if(!Ct.localStorage)return!1}catch{return!1}var e=Ct.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var ri=W;function ni(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Cs(e,t)}}var it;W.WritableState=At;var Zo={deprecate:Xo},ii=Xn,or=Ie.Buffer,es=Ct.Uint8Array||function(){};function ts(t){return or.from(t)}function rs(t){return or.isBuffer(t)||t instanceof es}var Qr=Zn,ns=ti,is=ns.getHighWaterMark,Ne=Ye.codes,os=Ne.ERR_INVALID_ARG_TYPE,ss=Ne.ERR_METHOD_NOT_IMPLEMENTED,as=Ne.ERR_MULTIPLE_CALLBACK,ls=Ne.ERR_STREAM_CANNOT_PIPE,fs=Ne.ERR_STREAM_DESTROYED,us=Ne.ERR_STREAM_NULL_VALUES,cs=Ne.ERR_STREAM_WRITE_AFTER_END,hs=Ne.ERR_UNKNOWN_ENCODING,ut=Qr.errorOrDestroy;_e.exports(W,ii);function ps(){}function At(t,e,r){it=it||gt,t=t||{},typeof r!="boolean"&&(r=e instanceof it),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=is(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){_s(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new ni(this)}At.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(At.prototype,"buffer",{get:Zo.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Wt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Wt=Function.prototype[Symbol.hasInstance],Object.defineProperty(W,Symbol.hasInstance,{value:function(e){return Wt.call(this,e)?!0:this!==W?!1:e&&e._writableState instanceof At}})):Wt=function(e){return e instanceof this};function W(t){it=it||gt;var e=this instanceof it;if(!e&&!Wt.call(W,this))return new W(t);this._writableState=new At(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),ii.call(this)}W.prototype.pipe=function(){ut(this,new ls)};function ds(t,e){var r=new cs;ut(t,r),process.nextTick(e,r)}function ys(t,e,r,n){var i;return r===null?i=new us:typeof r!="string"&&!e.objectMode&&(i=new os("chunk",["string","Buffer"],r)),i?(ut(t,i),process.nextTick(n,i),!1):!0}W.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&rs(t);return o&&!or.isBuffer(t)&&(t=ts(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=ps),n.ending?ds(this,r):(o||ys(this,n,t,r))&&(n.pendingcb++,i=vs(this,n,o,t,e,r)),i};W.prototype.cork=function(){this._writableState.corked++};W.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&oi(this,t))};W.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new hs(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(W.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function gs(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=or.from(e,r)),e}Object.defineProperty(W.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function vs(t,e,r,n,i,o){if(!r){var s=gs(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Dr(t,e,!1,a,n,i,o);return c}function Dr(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new fs("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function bs(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(xt,t,e),t._writableState.errorEmitted=!0,ut(t,n)):(i(n),t._writableState.errorEmitted=!0,ut(t,n),xt(t,e))}function ws(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function _s(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new as;if(ws(r),e)bs(t,r,n,e,i);else{var o=si(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&oi(t,r),n?process.nextTick(Tn,t,r,o,i):Tn(t,r,o,i)}}function Tn(t,e,r,n){r||ms(t,e),e.pendingcb--,n(),xt(t,e)}function ms(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function oi(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,Dr(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new ni(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,g=r.callback,p=e.objectMode?1:c.length;if(Dr(t,e,!1,p,c,l,g),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}W.prototype._write=function(t,e,r){r(new ss("_write()"))};W.prototype._writev=null;W.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Ts(this,n,r),this};Object.defineProperty(W.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function si(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Es(t,e){t._final(function(r){e.pendingcb--,r&&ut(t,r),e.prefinished=!0,t.emit("prefinish"),xt(t,e)})}function Ss(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Es,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function xt(t,e){var r=si(e);if(r&&(Ss(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Ts(t,e,r){e.ending=!0,xt(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Cs(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});W.prototype.destroy=Qr.destroy;W.prototype._undestroy=Qr.undestroy;W.prototype._destroy=function(t,e){e(t)};var xs=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},gt=me,ai=fi,Nr=ri;_e.exports(me,ai);for(var Cn=xs(Nr.prototype),Er=0;Er<Cn.length;Er++){var Sr=Cn[Er];me.prototype[Sr]||(me.prototype[Sr]=Nr.prototype[Sr])}function me(t){if(!(this instanceof me))return new me(t);ai.call(this,t),Nr.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ks)))}Object.defineProperty(me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ks(){this._writableState.ended||process.nextTick(As,this)}function As(t){t.end()}Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var Gr={},jr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Ie,n=r.Buffer;function i(s,a){for(var c in s)a[c]=s[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(s,a,c){return n(s,a,c)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(s,a,c){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,a,c)},o.alloc=function(s,a,c){if(typeof s!="number")throw new TypeError("Argument must be a number");var l=n(s);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(s)}})(jr,jr.exports);var Yr=jr.exports.Buffer,xn=Yr.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Is(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Bs(t){var e=Is(t);if(typeof e!="string"&&(Yr.isEncoding===xn||!xn(t)))throw new Error("Unknown encoding: "+t);return e||t}Gr.StringDecoder=It;function It(t){this.encoding=Bs(t);var e;switch(this.encoding){case"utf16le":this.text=Fs,this.end=Us,e=4;break;case"utf8":this.fillLast=Ms,e=4;break;case"base64":this.text=Ds,this.end=Ns,e=3;break;default:this.write=js,this.end=qs;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Yr.allocUnsafe(e)}It.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};It.prototype.end=Ls;It.prototype.text=Os;It.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Tr(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Rs(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Tr(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Tr(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Tr(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Ps(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Ms(t){var e=this.lastTotal-this.lastNeed,r=Ps(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Os(t,e){var r=Rs(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Ls(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Fs(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Us(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Ds(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Ns(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function js(t){return t.toString(this.encoding)}function qs(t){return t&&t.length?this.write(t):""}var kn=Ye.codes.ERR_STREAM_PREMATURE_CLOSE;function $s(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function zs(){}function Vs(t){return t.setHeader&&typeof t.abort=="function"}function li(t,e,r){if(typeof e=="function")return li(t,null,e);e||(e={}),r=$s(r||zs);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,c=!0,i||r.call(t)},g=function(S){r.call(t,S)},p=function(){var S;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(S=new kn),r.call(t,S);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(S=new kn),r.call(t,S)},y=function(){t.req.on("finish",a)};return Vs(t)?(t.on("complete",a),t.on("abort",p),t.req?y():t.on("request",y)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",g),t.on("close",p),function(){t.removeListener("complete",a),t.removeListener("abort",p),t.removeListener("request",y),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",g),t.removeListener("close",p)}}var Xr=li,Nt;function Be(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Hs=Xr,Re=Symbol("lastResolve"),qe=Symbol("lastReject"),mt=Symbol("error"),Gt=Symbol("ended"),Ve=Symbol("lastPromise"),Jr=Symbol("handlePromise"),He=Symbol("stream");function Me(t,e){return{value:t,done:e}}function Ws(t){var e=t[Re];if(e!==null){var r=t[He].read();r!==null&&(t[Ve]=null,t[Re]=null,t[qe]=null,e(Me(r,!1)))}}function Ks(t){process.nextTick(Ws,t)}function Qs(t,e){return function(r,n){t.then(function(){if(e[Gt]){r(Me(void 0,!0));return}e[Jr](r,n)},n)}}var Gs=Object.getPrototypeOf(function(){}),Ys=Object.setPrototypeOf((Nt={get stream(){return this[He]},next:function(){var e=this,r=this[mt];if(r!==null)return Promise.reject(r);if(this[Gt])return Promise.resolve(Me(void 0,!0));if(this[He].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[mt]?a(e[mt]):s(Me(void 0,!0))})});var n=this[Ve],i;if(n)i=new Promise(Qs(n,this));else{var o=this[He].read();if(o!==null)return Promise.resolve(Me(o,!1));i=new Promise(this[Jr])}return this[Ve]=i,i}},Be(Nt,Symbol.asyncIterator,function(){return this}),Be(Nt,"return",function(){var e=this;return new Promise(function(r,n){e[He].destroy(null,function(i){if(i){n(i);return}r(Me(void 0,!0))})})}),Nt),Gs),Xs=function(e){var r,n=Object.create(Ys,(r={},Be(r,He,{value:e,writable:!0}),Be(r,Re,{value:null,writable:!0}),Be(r,qe,{value:null,writable:!0}),Be(r,mt,{value:null,writable:!0}),Be(r,Gt,{value:e._readableState.endEmitted,writable:!0}),Be(r,Jr,{value:function(o,s){var a=n[He].read();a?(n[Ve]=null,n[Re]=null,n[qe]=null,o(Me(a,!1))):(n[Re]=o,n[qe]=s)},writable:!0}),r));return n[Ve]=null,Hs(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[qe];o!==null&&(n[Ve]=null,n[Re]=null,n[qe]=null,o(i)),n[mt]=i;return}var s=n[Re];s!==null&&(n[Ve]=null,n[Re]=null,n[qe]=null,s(Me(void 0,!0))),n[Gt]=!0}),e.on("readable",Ks.bind(null,n)),n},Js=Xs,Zs=function(){throw new Error("Readable.from is not available in the browser")},fi=U,ot;U.ReadableState=ci;ge.EventEmitter;var ui=function(e,r){return e.listeners(r).length},Bt=Xn,sr=Ie.Buffer,ea=Ct.Uint8Array||function(){};function ta(t){return sr.from(t)}function ra(t){return sr.isBuffer(t)||t instanceof ea}var Cr=ge,O;Cr&&Cr.debuglog?O=Cr.debuglog("stream"):O=function(){};var na=jo,Zr=Zn,ia=ti,oa=ia.getHighWaterMark,ar=Ye.codes,sa=ar.ERR_INVALID_ARG_TYPE,aa=ar.ERR_STREAM_PUSH_AFTER_EOF,la=ar.ERR_METHOD_NOT_IMPLEMENTED,fa=ar.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,st,xr,kr;_e.exports(U,Bt);var Et=Zr.errorOrDestroy,Ar=["error","close","destroy","pause","resume"];function ua(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function ci(t,e,r){ot=ot||gt,t=t||{},typeof r!="boolean"&&(r=e instanceof ot),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=oa(this,t,"readableHighWaterMark",r),this.buffer=new na,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(st||(st=Gr.StringDecoder),this.decoder=new st(t.encoding),this.encoding=t.encoding)}function U(t){if(ot=ot||gt,!(this instanceof U))return new U(t);var e=this instanceof ot;this._readableState=new ci(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Bt.call(this)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});U.prototype.destroy=Zr.destroy;U.prototype._undestroy=Zr.undestroy;U.prototype._destroy=function(t,e){e(t)};U.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=sr.from(t,e),e=""),n=!0),hi(this,t,e,!1,n)};U.prototype.unshift=function(t){return hi(this,t,null,!0,!1)};function hi(t,e,r,n,i){O("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,pa(t,o);else{var s;if(i||(s=ca(o,e)),s)Et(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==sr.prototype&&(e=ta(e)),n)o.endEmitted?Et(t,new fa):Ir(t,o,e,!0);else if(o.ended)Et(t,new aa);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?Ir(t,o,e,!1):qr(t,o)):Ir(t,o,e,!1)}else n||(o.reading=!1,qr(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function Ir(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&lr(t)),qr(t,e)}function ca(t,e){var r;return!ra(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new sa("chunk",["string","Buffer","Uint8Array"],e)),r}U.prototype.isPaused=function(){return this._readableState.flowing===!1};U.prototype.setEncoding=function(t){st||(st=Gr.StringDecoder);var e=new st(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var An=1073741824;function ha(t){return t>=An?t=An:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function In(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=ha(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}U.prototype.read=function(t){O("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return O("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Br(this):lr(this),null;if(t=In(t,e),t===0&&e.ended)return e.length===0&&Br(this),null;var n=e.needReadable;O("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,O("length less than watermark",n)),e.ended||e.reading?(n=!1,O("reading or ended",n)):n&&(O("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=In(r,e)));var i;return t>0?i=yi(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Br(this)),i!==null&&this.emit("data",i),i};function pa(t,e){if(O("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?lr(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,pi(t)))}}function lr(t){var e=t._readableState;O("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(O("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(pi,t))}function pi(t){var e=t._readableState;O("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,en(t)}function qr(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(da,t,e))}function da(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(O("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}U.prototype._read=function(t){Et(this,new la("_read()"))};U.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,O("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:E;n.endEmitted?process.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(I,B){O("onunpipe"),I===r&&B&&B.hasUnpiped===!1&&(B.hasUnpiped=!0,g())}function a(){O("onend"),t.end()}var c=ya(r);t.on("drain",c);var l=!1;function g(){O("cleanup"),t.removeListener("close",w),t.removeListener("finish",S),t.removeListener("drain",c),t.removeListener("error",y),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",E),r.removeListener("data",p),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",p);function p(I){O("ondata");var B=t.write(I);O("dest.write",B),B===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&gi(n.pipes,t)!==-1)&&!l&&(O("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(I){O("onerror",I),E(),t.removeListener("error",y),ui(t,"error")===0&&Et(t,I)}ua(t,"error",y);function w(){t.removeListener("finish",S),E()}t.once("close",w);function S(){O("onfinish"),t.removeListener("close",w),E()}t.once("finish",S);function E(){O("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(O("pipe resume"),r.resume()),t};function ya(t){return function(){var r=t._readableState;O("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&ui(t,"data")&&(r.flowing=!0,en(t))}}U.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=gi(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};U.prototype.on=function(t,e){var r=Bt.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,O("on readable",n.length,n.reading),n.length?lr(this):n.reading||process.nextTick(ga,this)),r};U.prototype.addListener=U.prototype.on;U.prototype.removeListener=function(t,e){var r=Bt.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(di,this),r};U.prototype.removeAllListeners=function(t){var e=Bt.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(di,this),e};function di(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function ga(t){O("readable nexttick read 0"),t.read(0)}U.prototype.resume=function(){var t=this._readableState;return t.flowing||(O("resume"),t.flowing=!t.readableListening,va(this,t)),t.paused=!1,this};function va(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(ba,t,e))}function ba(t,e){O("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),en(t),e.flowing&&!e.reading&&t.read(0)}U.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function en(t){var e=t._readableState;for(O("flow",e.flowing);e.flowing&&t.read()!==null;);}U.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(O("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(O("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<Ar.length;o++)t.on(Ar[o],this.emit.bind(this,Ar[o]));return this._read=function(s){O("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return xr===void 0&&(xr=Js),xr(this)});Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});U._fromList=yi;Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function yi(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Br(t){var e=t._readableState;O("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(wa,e,t))}function wa(t,e){if(O("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(U.from=function(t,e){return kr===void 0&&(kr=Zs),kr(U,t,e)});function gi(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var vi=Ae,fr=Ye.codes,_a=fr.ERR_METHOD_NOT_IMPLEMENTED,ma=fr.ERR_MULTIPLE_CALLBACK,Ea=fr.ERR_TRANSFORM_ALREADY_TRANSFORMING,Sa=fr.ERR_TRANSFORM_WITH_LENGTH_0,ur=gt;_e.exports(Ae,ur);function Ta(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new ma);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ae(t){if(!(this instanceof Ae))return new Ae(t);ur.call(this,t),this._transformState={afterTransform:Ta.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Ca)}function Ca(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Bn(t,e,r)}):Bn(this,null,null)}Ae.prototype.push=function(t,e){return this._transformState.needTransform=!1,ur.prototype.push.call(this,t,e)};Ae.prototype._transform=function(t,e,r){r(new _a("_transform()"))};Ae.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ae.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ae.prototype._destroy=function(t,e){ur.prototype._destroy.call(this,t,function(r){e(r)})};function Bn(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Sa;if(t._transformState.transforming)throw new Ea;return t.push(null)}var xa=kt,bi=vi;_e.exports(kt,bi);function kt(t){if(!(this instanceof kt))return new kt(t);bi.call(this,t)}kt.prototype._transform=function(t,e,r){r(null,t)};var Rr;function ka(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var wi=Ye.codes,Aa=wi.ERR_MISSING_ARGS,Ia=wi.ERR_STREAM_DESTROYED;function Rn(t){if(t)throw t}function Ba(t){return t.setHeader&&typeof t.abort=="function"}function Ra(t,e,r,n){n=ka(n);var i=!1;t.on("close",function(){i=!0}),Rr===void 0&&(Rr=Xr),Rr(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,Ba(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new Ia("pipe"))}}}function Pn(t){t()}function Pa(t,e){return t.pipe(e)}function Ma(t){return!t.length||typeof t[t.length-1]!="function"?Rn:t.pop()}function Oa(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Ma(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Aa("streams");var i,o=e.map(function(s,a){var c=a<e.length-1,l=a>0;return Ra(s,c,l,function(g){i||(i=g),g&&o.forEach(Pn),!c&&(o.forEach(Pn),n(i))})});return e.reduce(Pa)}var La=Oa;(function(t,e){e=t.exports=fi,e.Stream=e,e.Readable=e,e.Writable=ri,e.Duplex=gt,e.Transform=vi,e.PassThrough=xa,e.finished=Xr,e.pipeline=La})(ke,ke.exports);const Fa=Wr,Ua=ke.exports.Readable,Da={objectMode:!0},Na={clean:!0};function Le(t){if(!(this instanceof Le))return new Le(t);this.options=t||{},this.options=Fa(Na,t),this._inflights=new Map}Le.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this};Le.prototype.createStream=function(){const t=new Ua(Da),e=[];let r=!1,n=0;return this._inflights.forEach(function(i,o){e.push(i)}),t._read=function(){!r&&n<e.length?this.push(e[n++]):this.push(null)},t.destroy=function(){if(r)return;const i=this;r=!0,setTimeout(function(){i.emit("close")},0)},t};Le.prototype.del=function(t,e){return t=this._inflights.get(t.messageId),t?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this};Le.prototype.get=function(t,e){return t=this._inflights.get(t.messageId),t?e(null,t):e&&e(new Error("missing packet")),this};Le.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()};var _i=Le;function ct(t){if(!(this instanceof ct))return new ct(t);this.aliasToTopic={},this.max=t}ct.prototype.put=function(t,e){return e===0||e>this.max?!1:(this.aliasToTopic[e]=t,this.length=Object.keys(this.aliasToTopic).length,!0)};ct.prototype.getTopicByAlias=function(t){return this.aliasToTopic[t]};ct.prototype.clear=function(){this.aliasToTopic={}};var ja=ct,qa=N;N.Node=Ke;N.create=N;function N(t){var e=this;if(e instanceof N||(e=new N),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}N.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};N.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};N.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};N.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)za(this,arguments[t]);return this.length};N.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Va(this,arguments[t]);return this.length};N.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};N.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};N.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};N.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};N.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};N.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};N.prototype.map=function(t,e){e=e||this;for(var r=new N,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};N.prototype.mapReverse=function(t,e){e=e||this;for(var r=new N,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};N.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};N.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};N.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};N.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};N.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new N;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};N.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new N;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};N.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=$a(this,i,r[n]);return o};N.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function $a(t,e,r){var n=e===t.head?new Ke(r,null,e,t):new Ke(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function za(t,e){t.tail=new Ke(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Va(t,e){t.head=new Ke(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Ke(t,e,r,n){if(!(this instanceof Ke))return new Ke(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{require("./iterator.js")(N)}catch{}const Ha=qa,$e=Symbol("max"),Ce=Symbol("length"),tt=Symbol("lengthCalculator"),St=Symbol("allowStale"),We=Symbol("maxAge"),Se=Symbol("dispose"),Mn=Symbol("noDisposeOnSet"),G=Symbol("lruList"),pe=Symbol("cache"),mi=Symbol("updateAgeOnGet"),Pr=()=>1;class Wa{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[$e]=e.max||1/0;const r=e.length||Pr;if(this[tt]=typeof r!="function"?Pr:r,this[St]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[We]=e.maxAge||0,this[Se]=e.dispose,this[Mn]=e.noDisposeOnSet||!1,this[mi]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[$e]=e||1/0,bt(this)}get max(){return this[$e]}set allowStale(e){this[St]=!!e}get allowStale(){return this[St]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[We]=e,bt(this)}get maxAge(){return this[We]}set lengthCalculator(e){typeof e!="function"&&(e=Pr),e!==this[tt]&&(this[tt]=e,this[Ce]=0,this[G].forEach(r=>{r.length=this[tt](r.value,r.key),this[Ce]+=r.length})),bt(this)}get lengthCalculator(){return this[tt]}get length(){return this[Ce]}get itemCount(){return this[G].length}rforEach(e,r){r=r||this;for(let n=this[G].tail;n!==null;){const i=n.prev;On(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[G].head;n!==null;){const i=n.next;On(this,e,n,r),n=i}}keys(){return this[G].toArray().map(e=>e.key)}values(){return this[G].toArray().map(e=>e.value)}reset(){this[Se]&&this[G]&&this[G].length&&this[G].forEach(e=>this[Se](e.key,e.value)),this[pe]=new Map,this[G]=new Ha,this[Ce]=0}dump(){return this[G].map(e=>Yt(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[G]}set(e,r,n){if(n=n||this[We],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,o=this[tt](r,e);if(this[pe].has(e)){if(o>this[$e])return at(this,this[pe].get(e)),!1;const c=this[pe].get(e).value;return this[Se]&&(this[Mn]||this[Se](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Ce]+=o-c.length,c.length=o,this.get(e),bt(this),!0}const s=new Ka(e,r,o,i,n);return s.length>this[$e]?(this[Se]&&this[Se](e,r),!1):(this[Ce]+=s.length,this[G].unshift(s),this[pe].set(e,this[G].head),bt(this),!0)}has(e){if(!this[pe].has(e))return!1;const r=this[pe].get(e).value;return!Yt(this,r)}get(e){return Mr(this,e,!0)}peek(e){return Mr(this,e,!1)}pop(){const e=this[G].tail;return e?(at(this,e),e.value):null}del(e){at(this,this[pe].get(e))}load(e){this.reset();const r=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[pe].forEach((e,r)=>Mr(this,r,!1))}}const Mr=(t,e,r)=>{const n=t[pe].get(e);if(n){const i=n.value;if(Yt(t,i)){if(at(t,n),!t[St])return}else r&&(t[mi]&&(n.value.now=Date.now()),t[G].unshiftNode(n));return i.value}},Yt=(t,e)=>{if(!e||!e.maxAge&&!t[We])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[We]&&r>t[We]},bt=t=>{if(t[Ce]>t[$e])for(let e=t[G].tail;t[Ce]>t[$e]&&e!==null;){const r=e.prev;at(t,e),e=r}},at=(t,e)=>{if(e){const r=e.value;t[Se]&&t[Se](r.key,r.value),t[Ce]-=r.length,t[pe].delete(r.key),t[G].removeNode(e)}};class Ka{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}}const On=(t,e,r,n)=>{let i=r.value;Yt(t,i)&&(at(t,r),t[St]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};var Qa=Wa,Ei={},Ga=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(g){return c([l,g])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(g){l=[6,g],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ya=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Xa=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Ja=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Si(t){var e=this;t===void 0&&(t=[]);var r=0,n=[];this.size=function(){return r},this.empty=function(){return r===0},this.clear=function(){r=0,n.length=0},this.front=function(){if(!this.empty())return n[0]},this.back=function(){if(!this.empty())return n[r-1]},this.forEach=function(i){n.forEach(i)},this.getElementByPos=function(i){if(i<0||i>=r)throw new Error("pos must more than 0 and less than vector's size");return n[i]},this.eraseElementByPos=function(i){if(i<0||i>=r)throw new Error("pos must more than 0 and less than vector's size");for(var o=i;o<r-1;++o)n[o]=n[o+1];this.popBack()},this.eraseElementByValue=function(i){var o=[];this.forEach(function(a){a!==i&&o.push(a)}),o.forEach(function(a,c){n[c]=a});for(var s=o.length;r>s;)this.popBack()},this.pushBack=function(i){n.push(i),++r},this.popBack=function(){n.pop(),r>0&&--r},this.setElementByPos=function(i,o){if(i<0||i>=r)throw new Error("pos must more than 0 and less than vector's size");n[i]=o},this.insert=function(i,o,s){if(s===void 0&&(s=1),i<0||i>r)throw new Error("pos must more than 0 and less than or equal to vector's size");n.splice.apply(n,Xa([i,0],Ya(new Array(s).fill(o)),!1)),r+=s},this.find=function(i){return n.includes(i)},this.reverse=function(){n.reverse()},this.unique=function(){var i,o=[];this.forEach(function(a,c){(c===0||a!==i)&&(o.push(a),i=a)}),o.forEach(function(a,c){n[c]=a});for(var s=o.length;r>s;)this.popBack()},this.sort=function(i){n.sort(i)},this[Symbol.iterator]=function(){return function(){return Ga(this,function(i){switch(i.label){case 0:return[5,Ja(n)];case 1:return[2,i.sent()]}})}()},t.forEach(function(i){return e.pushBack(i)}),Object.freeze(this)}Object.freeze(Si);function Ti(t){var e=this;t===void 0&&(t=[]);var r=0,n=[];this.size=function(){return r},this.empty=function(){return r===0},this.clear=function(){r=0,n.length=0},this.push=function(i){n.push(i),++r},this.pop=function(){n.pop(),r>0&&--r},this.top=function(){return n[r-1]},t.forEach(function(i){return e.push(i)}),Object.freeze(this)}Object.freeze(Ti);var Za=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(g){return c([l,g])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(g){l=[6,g],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},jt=function(){function t(e){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=e}return t}();function K(t){var e=this;t===void 0&&(t=[]);var r=0,n=void 0,i=void 0;this.size=function(){return r},this.empty=function(){return r===0},this.clear=function(){n=i=void 0,r=0},this.front=function(){return n==null?void 0:n.value},this.back=function(){return i==null?void 0:i.value},this.forEach=function(o){for(var s=n,a=0;s;){if(s.value===void 0)throw new Error("unknown error");o(s.value,a++),s=s.next}},this.getElementByPos=function(o){if(o<0||o>=r)throw new Error("pos must more then 0 and less then the list length");for(var s=n;o--&&s;)s=s.next;if(!s||s.value===void 0)throw new Error("unknown error");return s.value},this.eraseElementByPos=function(o){if(o<0||o>=r)throw new Error("erase pos must more then 0 and less then the list length");if(o===0)this.popFront();else if(o===r-1)this.popBack();else{for(var s=n;o--;){if(!(s!=null&&s.next))throw new Error("unknown error");s=s.next}if(!s||!s.pre||!s.next)throw new Error("unknown error");var a=s.pre,c=s.next;c.pre=a,a.next=c,r>0&&--r}},this.eraseElementByValue=function(o){for(;n&&n.value===o;)this.popFront();for(;i&&i.value===o;)this.popBack();if(!!n)for(var s=n;s;){if(s.value===o){var a=s.pre,c=s.next;c&&(c.pre=a),a&&(a.next=c),r>0&&--r}s=s.next}},this.pushBack=function(o){if(o==null)throw new Error("you can't push null or undefined here");++r;var s=new jt(o);i?(i.next=s,s.pre=i,i=s):n=i=s},this.popBack=function(){!i||(r>0&&--r,i&&(n===i?n=i=void 0:(i=i.pre,i&&(i.next=void 0))))},this.setElementByPos=function(o,s){if(s==null)throw new Error("you can't set null or undefined here");if(o<0||o>=r)throw new Error("pos must more then 0 and less then the list length");for(var a=n;o--;){if(!a)throw new Error("unknown error");a=a.next}a&&(a.value=s)},this.insert=function(o,s,a){if(a===void 0&&(a=1),s==null)throw new Error("you can't insert null or undefined here");if(o<0||o>r)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(a<0)throw new Error("insert size must more than 0");if(o===0)for(;a--;)this.pushFront(s);else if(o===r)for(;a--;)this.pushBack(s);else{for(var c=n,l=1;l<o;++l){if(!(c!=null&&c.next))throw new Error("unknown error");c=c==null?void 0:c.next}if(!c)throw new Error("unknown error");var g=c.next;for(r+=a;a--;)c.next=new jt(s),c.next.pre=c,c=c.next;c.next=g,g&&(g.pre=c)}},this.find=function(o){for(var s=n;s;){if(s.value===o)return!0;s=s.next}return!1},this.reverse=function(){for(var o=n,s=i,a=0;o&&s&&a*2<r;){var c=o.value;o.value=s.value,s.value=c,o=o.next,s=s.pre,++a}},this.unique=function(){for(var o=n;o;){for(var s=o;s&&s.next&&s.value===s.next.value;)s=s.next,r>0&&--r;o.next=s.next,o.next&&(o.next.pre=o),o=o.next}},this.sort=function(o){var s=[];this.forEach(function(c){s.push(c)}),s.sort(o);var a=n;s.forEach(function(c){a&&(a.value=c,a=a.next)})},this.pushFront=function(o){if(o==null)throw new Error("you can't push null or undefined here");++r;var s=new jt(o);n?(s.next=n,n.pre=s,n=s):n=i=s},this.popFront=function(){!n||(r>0&&--r,n&&(n===i?n=i=void 0:(n=n.next,n&&(n.pre=void 0))))},this.merge=function(o){var s=this,a=n;o.forEach(function(c){for(;a&&a.value!==void 0&&a.value<=c;)a=a.next;if(a===void 0)s.pushBack(c),a=i;else if(a===n)s.pushFront(c),a=n;else{++r;var l=a.pre;l&&(l.next=new jt(c),l.next.pre=l,l.next.next=a,a&&(a.pre=l.next))}})},this[Symbol.iterator]=function(){return function(){var o;return Za(this,function(s){switch(s.label){case 0:o=n,s.label=1;case 1:if(o===void 0)return[3,3];if(!o.value)throw new Error("unknown error");return[4,o.value];case 2:return s.sent(),o=o.next,[3,1];case 3:return[2]}})}()},t.forEach(function(o){return e.pushBack(o)}),Object.freeze(this)}Object.freeze(K);function Ci(t){t===void 0&&(t=[]);var e=new K(t);this.size=function(){return e.size()},this.empty=function(){return e.empty()},this.clear=function(){e.clear()},this.push=function(r){e.pushBack(r)},this.pop=function(){e.popFront()},this.front=function(){return e.front()},Object.freeze(this)}Object.freeze(Ci);var el=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(g){return c([l,g])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(g){l=[6,g],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};D.sigma=3;D.bucketSize=5e3;function D(t){var e=this;t===void 0&&(t=[]);var r=[],n=0,i=0,o=0,s=0,a=0,c=0;this.size=function(){return c},this.empty=function(){return c===0},this.clear=function(){n=o=i=s=a=c=0,g.call(this,D.bucketSize),c=0},this.front=function(){return r[n][i]},this.back=function(){return r[o][s]},this.forEach=function(p){if(!this.empty()){var y=0;if(n===o){for(var w=i;w<=s;++w)p(r[n][w],y++);return}for(var w=i;w<D.bucketSize;++w)p(r[n][w],y++);for(var w=n+1;w<o;++w)for(var S=0;S<D.bucketSize;++S)p(r[w][S],y++);for(var w=0;w<=s;++w)p(r[o][w],y++)}};var l=function(p){var y=n*D.bucketSize+i,w=y+p,S=o*D.bucketSize+s;if(w<y||w>S)throw new Error("pos should more than 0 and less than queue's size");var E=Math.floor(w/D.bucketSize),I=w%D.bucketSize;return{curNodeBucketIndex:E,curNodePointerIndex:I}};this.getElementByPos=function(p){var y=l(p),w=y.curNodeBucketIndex,S=y.curNodePointerIndex;return r[w][S]},this.eraseElementByPos=function(p){var y=this;if(p<0||p>c)throw new Error("pos should more than 0 and less than queue's size");if(p===0)this.popFront();else if(p===this.size())this.popBack();else{for(var w=[],S=p+1;S<c;++S)w.push(this.getElementByPos(S));this.cut(p),this.popBack(),w.forEach(function(E){return y.pushBack(E)})}},this.eraseElementByValue=function(p){if(!this.empty()){var y=[];this.forEach(function(E){E!==p&&y.push(E)});for(var w=y.length,S=0;S<w;++S)this.setElementByPos(S,y[S]);this.cut(w-1)}};var g=function(p){for(var y=[],w=p*D.sigma,S=Math.max(Math.ceil(w/D.bucketSize),2),E=0;E<S;++E)y.push(new Array(D.bucketSize));var I=Math.ceil(p/D.bucketSize),B=Math.floor(S/2)-Math.floor(I/2),h=B,d=0;if(this.size())for(var E=0;E<I;++E){for(var _=0;_<D.bucketSize;++_)if(y[B+E][_]=this.front(),this.popFront(),this.empty()){h=B+E,d=_;break}if(this.empty())break}r=y,n=B,i=0,o=h,s=d,a=S,c=p};this.pushBack=function(p){this.empty()||(o===a-1&&s===D.bucketSize-1&&g.call(this,this.size()),s<D.bucketSize-1?++s:o<a-1&&(++o,s=0)),++c,r[o][s]=p},this.popBack=function(){this.empty()||(this.size()!==1&&(s>0?--s:n<o&&(--o,s=D.bucketSize-1)),c>0&&--c)},this.setElementByPos=function(p,y){var w=l(p),S=w.curNodeBucketIndex,E=w.curNodePointerIndex;r[S][E]=y},this.insert=function(p,y,w){var S=this;if(w===void 0&&(w=1),p===0)for(;w--;)this.pushFront(y);else if(p===this.size())for(;w--;)this.pushBack(y);else{for(var E=[],I=p;I<c;++I)E.push(this.getElementByPos(I));this.cut(p-1);for(var I=0;I<w;++I)this.pushBack(y);E.forEach(function(B){return S.pushBack(B)})}},this.find=function(p){if(n===o){for(var y=i;y<=s;++y)if(r[n][y]===p)return!0;return!1}for(var y=i;y<D.bucketSize;++y)if(r[n][y]===p)return!0;for(var y=n+1;y<o;++y)for(var w=0;w<D.bucketSize;++w)if(r[y][w]===p)return!0;for(var y=0;y<=s;++y)if(r[o][y]===p)return!0;return!1},this.reverse=function(){for(var p=0,y=c-1;p<y;){var w=this.getElementByPos(p);this.setElementByPos(p,this.getElementByPos(y)),this.setElementByPos(y,w),++p,--y}},this.unique=function(){if(!this.empty()){var p=[],y=this.front();this.forEach(function(S,E){(E===0||S!==y)&&(p.push(S),y=S)});for(var w=0;w<c;++w)this.setElementByPos(w,p[w]);this.cut(p.length-1)}},this.sort=function(p){var y=[];this.forEach(function(S){y.push(S)}),y.sort(p);for(var w=0;w<c;++w)this.setElementByPos(w,y[w])},this.pushFront=function(p){this.empty()||(n===0&&i===0&&g.call(this,this.size()),i>0?--i:n>0&&(--n,i=D.bucketSize-1)),++c,r[n][i]=p},this.popFront=function(){this.empty()||(this.size()!==1&&(i<D.bucketSize-1?++i:n<o&&(++n,i=0)),c>0&&--c)},this.shrinkToFit=function(){var p=this,y=[];this.forEach(function(I){y.push(I)});var w=y.length;r=[];for(var S=Math.ceil(w/D.bucketSize),E=0;E<S;++E)r.push(new Array(D.bucketSize));this.clear(),y.forEach(function(I){return p.pushBack(I)})},this.cut=function(p){if(p<0){this.clear();return}var y=l(p),w=y.curNodeBucketIndex,S=y.curNodePointerIndex;o=w,s=S,c=p+1},this[Symbol.iterator]=function(){return function(){var y,y,y,p,y;return el(this,function(w){switch(w.label){case 0:if(c===0)return[2];if(n!==o)return[3,5];y=i,w.label=1;case 1:return y<=s?[4,r[n][y]]:[3,4];case 2:w.sent(),w.label=3;case 3:return++y,[3,1];case 4:return[2];case 5:y=i,w.label=6;case 6:return y<D.bucketSize?[4,r[n][y]]:[3,9];case 7:w.sent(),w.label=8;case 8:return++y,[3,6];case 9:y=n+1,w.label=10;case 10:if(!(y<o))return[3,15];p=0,w.label=11;case 11:return p<D.bucketSize?[4,r[y][p]]:[3,14];case 12:w.sent(),w.label=13;case 13:return++p,[3,11];case 14:return++y,[3,10];case 15:y=0,w.label=16;case 16:return y<=s?[4,r[o][y]]:[3,19];case 17:w.sent(),w.label=18;case 18:return++y,[3,16];case 19:return[2]}})}()},function(){var p=D.bucketSize;t.size?p=t.size():t.length&&(p=t.length);var y=p*D.sigma;a=Math.ceil(y/D.bucketSize),a=Math.max(a,3);for(var w=0;w<a;++w)r.push(new Array(D.bucketSize));var S=Math.ceil(p/D.bucketSize);n=Math.floor(a/2)-Math.floor(S/2),o=n,t.forEach(function(E){return e.pushBack(E)})}(),Object.freeze(this)}Object.freeze(D);function xi(t,e){t===void 0&&(t=[]),e=e||function(s,a){return s>a?-1:s<a?1:0};var r=[];t.forEach(function(s){return r.push(s)});var n=r.length,i=function(s,a){if(s<0||s>=n)throw new Error("unknown error");if(a<0||a>=n)throw new Error("unknown error");var c=r[s];r[s]=r[a],r[a]=c},o=function(s){if(s<0||s>=n)throw new Error("unknown error");var a=s*2+1,c=s*2+2;a<n&&e(r[s],r[a])>0&&i(s,a),c<n&&e(r[s],r[c])>0&&i(s,c)};(function(){for(var s=Math.floor((n-1)/2);s>=0;--s)for(var a=s,c=a*2+1;c<n;){var l=c,g=l+1,p=l;if(g<n&&e(r[l],r[g])>0&&(p=g),e(r[a],r[p])<=0)break;i(a,p),a=p,c=a*2+1}})(),this.size=function(){return n},this.empty=function(){return n===0},this.clear=function(){n=0,r.length=0},this.push=function(s){if(r.push(s),++n,n!==1)for(var a=n-1;a>0;){var c=Math.floor((a-1)/2);if(e(r[c],s)<=0)break;o(c),a=c}},this.pop=function(){if(!this.empty()){if(this.size()===1){--n;return}var s=r[n-1];--n;for(var a=0;a<this.size();){var c=a*2+1,l=a*2+2;if(c>=this.size())break;var g=c;if(l<this.size()&&e(r[c],r[l])>0&&(g=l),e(r[g],s)>=0)break;r[a]=r[g],a=g}r[a]=s}},this.top=function(){return r[0]},Object.freeze(this)}Object.freeze(xi);var x=function(){function t(e,r){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=e,this.value=r}return t.prototype.rotateLeft=function(){var e=this.parent,r=this.brother,n=this.leftChild,i=this.rightChild;if(!i)throw new Error("unknown error");var o=i.leftChild,s=i.rightChild;return e&&(e.leftChild===this?e.leftChild=i:e.rightChild===this&&(e.rightChild=i)),i.parent=e,i.brother=r,i.leftChild=this,i.rightChild=s,r&&(r.brother=i),this.parent=i,this.brother=s,this.leftChild=n,this.rightChild=o,s&&(s.parent=i,s.brother=this),n&&(n.parent=this,n.brother=o),o&&(o.parent=this,o.brother=n),i},t.prototype.rotateRight=function(){var e=this.parent,r=this.brother,n=this.leftChild;if(!n)throw new Error("unknown error");var i=this.rightChild,o=n.leftChild,s=n.rightChild;return e&&(e.leftChild===this?e.leftChild=n:e.rightChild===this&&(e.rightChild=n)),n.parent=e,n.brother=r,n.leftChild=o,n.rightChild=this,r&&(r.brother=n),o&&(o.parent=n,o.brother=this),this.parent=n,this.brother=o,this.leftChild=s,this.rightChild=i,s&&(s.parent=this,s.brother=i),i&&(i.parent=this,i.brother=s),n},t.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},t.TreeNodeColorType={red:!0,black:!1},t}();Object.freeze(x);var tl=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(g){return c([l,g])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(g){l=[6,g],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},qt=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ze(t,e){var r=this;t===void 0&&(t=[]),e=e||function(h,d){return h<d?-1:h>d?1:0};var n=0,i=new x;i.color=x.TreeNodeColorType.black,this.size=function(){return n},this.empty=function(){return n===0},this.clear=function(){n=0,i.key=void 0,i.leftChild=i.rightChild=i.brother=i.parent=void 0,i.color=x.TreeNodeColorType.black};var o=function(h){if(!h||h.key===void 0)throw new Error("unknown error");return h.leftChild?o(h.leftChild):h},s=function(h){if(!h||h.key===void 0)throw new Error("unknown error");return h.rightChild?s(h.rightChild):h};this.front=function(){if(!this.empty()){var h=o(i);return h.key}},this.back=function(){if(!this.empty()){var h=s(i);return h.key}},this.forEach=function(h){var d,_,C=0;try{for(var M=qt(this),j=M.next();!j.done;j=M.next()){var ae=j.value;h(ae,C++)}}catch(he){d={error:he}}finally{try{j&&!j.done&&(_=M.return)&&_.call(M)}finally{if(d)throw d.error}}},this.getElementByPos=function(h){var d,_;if(h<0||h>=this.size())throw new Error("pos must more than 0 and less than set's size");var C=0;try{for(var M=qt(this),j=M.next();!j.done;j=M.next()){var ae=j.value;if(C===h)return ae;++C}}catch(he){d={error:he}}finally{try{j&&!j.done&&(_=M.return)&&_.call(M)}finally{if(d)throw d.error}}throw new Error("unknown error")};var a=function(h){var d=h.parent;if(!d){if(h===i)return;throw new Error("unknown error")}if(h.color===x.TreeNodeColorType.red){h.color=x.TreeNodeColorType.black;return}var _=h.brother;if(!_)throw new Error("unknown error");if(h===d.leftChild){if(_.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.black,d.color=x.TreeNodeColorType.red;var C=d.rotateLeft();i===d&&(i=C),a(h)}else if(_.color===x.TreeNodeColorType.black)if(_.rightChild&&_.rightChild.color===x.TreeNodeColorType.red){_.color=d.color,d.color=x.TreeNodeColorType.black,_.rightChild&&(_.rightChild.color=x.TreeNodeColorType.black);var C=d.rotateLeft();i===d&&(i=C),h.color=x.TreeNodeColorType.black}else if((!_.rightChild||_.rightChild.color===x.TreeNodeColorType.black)&&_.leftChild&&_.leftChild.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.red,_.leftChild&&(_.leftChild.color=x.TreeNodeColorType.black);var C=_.rotateRight();i===_&&(i=C),a(h)}else(!_.leftChild||_.leftChild.color===x.TreeNodeColorType.black)&&(!_.rightChild||_.rightChild.color===x.TreeNodeColorType.black)&&(_.color=x.TreeNodeColorType.red,a(d))}else if(h===d.rightChild){if(_.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.black,d.color=x.TreeNodeColorType.red;var C=d.rotateRight();i===d&&(i=C),a(h)}else if(_.color===x.TreeNodeColorType.black)if(_.leftChild&&_.leftChild.color===x.TreeNodeColorType.red){_.color=d.color,d.color=x.TreeNodeColorType.black,_.leftChild&&(_.leftChild.color=x.TreeNodeColorType.black);var C=d.rotateRight();i===d&&(i=C),h.color=x.TreeNodeColorType.black}else if((!_.leftChild||_.leftChild.color===x.TreeNodeColorType.black)&&_.rightChild&&_.rightChild.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.red,_.rightChild&&(_.rightChild.color=x.TreeNodeColorType.black);var C=_.rotateLeft();i===_&&(i=C),a(h)}else(!_.leftChild||_.leftChild.color===x.TreeNodeColorType.black)&&(!_.rightChild||_.rightChild.color===x.TreeNodeColorType.black)&&(_.color=x.TreeNodeColorType.red,a(d))}},c=function(h){for(var d=h;d.leftChild||d.rightChild;){if(d.rightChild){d=o(d.rightChild);var _=h.key;h.key=d.key,d.key=_,h=d}if(d.leftChild){d=s(d.leftChild);var _=h.key;h.key=d.key,d.key=_,h=d}}a(d),d&&d.remove(),--n,i.color=x.TreeNodeColorType.black},l=function(h,d){if(!h||h.key===void 0)return!1;var _=l(h.leftChild,d);return _||d(h)?!0:l(h.rightChild,d)};this.eraseElementByPos=function(h){if(h<0||h>=n)throw new Error("pos must more than 0 and less than set's size");var d=0;l(i,function(_){return h===d?(c(_),!0):(++d,!1)})},this.eraseElementByValue=function(h){if(!this.empty()){var d=y(i,h);d===void 0||d.key===void 0||e(d.key,h)!==0||c(d)}};var g=function(h,d){if(!h||h.key===void 0)throw new Error("unknown error");var _=e(d,h.key);return _<0?h.leftChild?g(h.leftChild,d):(h.leftChild=new x,h.leftChild.parent=h,h.leftChild.brother=h.rightChild,h.rightChild&&(h.rightChild.brother=h.leftChild),h.leftChild):_>0?h.rightChild?g(h.rightChild,d):(h.rightChild=new x,h.rightChild.parent=h,h.rightChild.brother=h.leftChild,h.leftChild&&(h.leftChild.brother=h.rightChild),h.rightChild):h},p=function(h){var d=h.parent;if(!d){if(h===i)return;throw new Error("unknown error")}if(d.color!==x.TreeNodeColorType.black&&d.color===x.TreeNodeColorType.red){var _=d.brother,C=d.parent;if(!C)throw new Error("unknown error");if(_&&_.color===x.TreeNodeColorType.red)_.color=d.color=x.TreeNodeColorType.black,C.color=x.TreeNodeColorType.red,p(C);else if(!_||_.color===x.TreeNodeColorType.black){if(d===C.leftChild){if(h===d.leftChild){d.color=x.TreeNodeColorType.black,C.color=x.TreeNodeColorType.red;var M=C.rotateRight();C===i&&(i=M)}else if(h===d.rightChild){var M=d.rotateLeft();C===i&&(i=M),p(d)}}else if(d===C.rightChild){if(h===d.leftChild){var M=d.rotateRight();C===i&&(i=M),p(d)}else if(h===d.rightChild){d.color=x.TreeNodeColorType.black,C.color=x.TreeNodeColorType.red;var M=C.rotateLeft();C===i&&(i=M)}}}}};this.insert=function(h){if(h==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty()){++n,i.key=h,i.color=x.TreeNodeColorType.black;return}var d=g(i,h);d.key!==void 0&&e(d.key,h)===0||(++n,d.key=h,p(d),i.color=x.TreeNodeColorType.black)};var y=function(h,d){if(!(!h||h.key===void 0)){var _=e(d,h.key);return _<0?y(h.leftChild,d):_>0?y(h.rightChild,d):h}};this.find=function(h){var d=y(i,h);return d!==void 0&&d.key!==void 0&&e(d.key,h)===0};var w=function(h,d){if(!(!h||h.key===void 0)){var _=e(h.key,d);if(_===0)return h.key;if(_<0)return w(h.rightChild,d);var C=w(h.leftChild,d);return C!==void 0?C:h.key}};this.lowerBound=function(h){return w(i,h)};var S=function(h,d){if(!(!h||h.key===void 0)){var _=e(h.key,d);if(_<=0)return S(h.rightChild,d);var C=S(h.leftChild,d);return C!==void 0?C:h.key}};this.upperBound=function(h){return S(i,h)};var E=function(h,d){if(!(!h||h.key===void 0)){var _=e(h.key,d);if(_===0)return h.key;if(_>0)return E(h.leftChild,d);var C=E(h.rightChild,d);return C!==void 0?C:h.key}};this.reverseLowerBound=function(h){return E(i,h)};var I=function(h,d){if(!(!h||h.key===void 0)){var _=e(h.key,d);if(_>=0)return I(h.leftChild,d);var C=I(h.rightChild,d);return C!==void 0?C:h.key}};this.reverseUpperBound=function(h){return I(i,h)},this.union=function(h){var d=this;h.forEach(function(_){return d.insert(_)})},this.getHeight=function(){if(this.empty())return 0;var h=function(d){return d?Math.max(h(d.leftChild),h(d.rightChild))+1:1};return h(i)};var B=function(h){return tl(this,function(d){switch(d.label){case 0:return!h||h.key===void 0?[2]:[5,qt(B(h.leftChild))];case 1:return d.sent(),[4,h.key];case 2:return d.sent(),[5,qt(B(h.rightChild))];case 3:return d.sent(),[2]}})};this[Symbol.iterator]=function(){return B(i)},t.forEach(function(h){return r.insert(h)}),Object.freeze(this)}Object.freeze(ze);var rl=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(g){return c([l,g])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(g){l=[6,g],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},$t=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Te(t,e){var r=this;t===void 0&&(t=[]),e=e||function(h,d){return h<d?-1:h>d?1:0};var n=0,i=new x;i.color=x.TreeNodeColorType.black,this.size=function(){return n},this.empty=function(){return n===0},this.clear=function(){n=0,i.key=i.value=void 0,i.leftChild=i.rightChild=i.brother=void 0};var o=function(h){if(!h||h.key===void 0)throw new Error("unknown error");return h.leftChild?o(h.leftChild):h},s=function(h){if(!h||h.key===void 0)throw new Error("unknown error");return h.rightChild?s(h.rightChild):h};this.front=function(){if(!this.empty()){var h=o(i);if(h.key===void 0||h.value===void 0)throw new Error("unknown error");return{key:h.key,value:h.value}}},this.back=function(){if(!this.empty()){var h=s(i);if(h.key===void 0||h.value===void 0)throw new Error("unknown error");return{key:h.key,value:h.value}}},this.forEach=function(h){var d,_,C=0;try{for(var M=$t(this),j=M.next();!j.done;j=M.next()){var ae=j.value;h(ae,C++)}}catch(he){d={error:he}}finally{try{j&&!j.done&&(_=M.return)&&_.call(M)}finally{if(d)throw d.error}}},this.getElementByPos=function(h){var d,_;if(h<0||h>=this.size())throw new Error("pos must more than 0 and less than set's size");var C=0;try{for(var M=$t(this),j=M.next();!j.done;j=M.next()){var ae=j.value;if(C===h)return ae;++C}}catch(he){d={error:he}}finally{try{j&&!j.done&&(_=M.return)&&_.call(M)}finally{if(d)throw d.error}}throw new Error("unknown Error")};var a=function(h,d){if(!(!h||h.key===void 0||h.value===void 0)){var _=e(h.key,d);return _===0?{key:h.key,value:h.value}:_<0?a(h.rightChild,d):a(h.leftChild,d)||{key:h.key,value:h.value}}};this.lowerBound=function(h){return a(i,h)};var c=function(h,d){if(!(!h||h.key===void 0||h.value===void 0)){var _=e(h.key,d);return _<=0?c(h.rightChild,d):c(h.leftChild,d)||{key:h.key,value:h.value}}};this.upperBound=function(h){return c(i,h)};var l=function(h,d){if(!(!h||h.key===void 0||h.value===void 0)){var _=e(h.key,d);return _===0?{key:h.key,value:h.value}:_>0?l(h.leftChild,d):l(h.rightChild,d)||{key:h.key,value:h.value}}};this.reverseLowerBound=function(h){return l(i,h)};var g=function(h,d){if(!(!h||h.key===void 0||h.value===void 0)){var _=e(h.key,d);return _>=0?g(h.leftChild,d):g(h.rightChild,d)||{key:h.key,value:h.value}}};this.reverseUpperBound=function(h){return g(i,h)};var p=function(h){var d=h.parent;if(!d){if(h===i)return;throw new Error("unknown error")}if(h.color===x.TreeNodeColorType.red){h.color=x.TreeNodeColorType.black;return}var _=h.brother;if(!_)throw new Error("unknown error");if(h===d.leftChild){if(_.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.black,d.color=x.TreeNodeColorType.red;var C=d.rotateLeft();i===d&&(i=C),p(h)}else if(_.color===x.TreeNodeColorType.black)if(_.rightChild&&_.rightChild.color===x.TreeNodeColorType.red){_.color=d.color,d.color=x.TreeNodeColorType.black,_.rightChild&&(_.rightChild.color=x.TreeNodeColorType.black);var C=d.rotateLeft();i===d&&(i=C),h.color=x.TreeNodeColorType.black}else if((!_.rightChild||_.rightChild.color===x.TreeNodeColorType.black)&&_.leftChild&&_.leftChild.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.red,_.leftChild&&(_.leftChild.color=x.TreeNodeColorType.black);var C=_.rotateRight();i===_&&(i=C),p(h)}else(!_.leftChild||_.leftChild.color===x.TreeNodeColorType.black)&&(!_.rightChild||_.rightChild.color===x.TreeNodeColorType.black)&&(_.color=x.TreeNodeColorType.red,p(d))}else if(h===d.rightChild){if(_.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.black,d.color=x.TreeNodeColorType.red;var C=d.rotateRight();i===d&&(i=C),p(h)}else if(_.color===x.TreeNodeColorType.black)if(_.leftChild&&_.leftChild.color===x.TreeNodeColorType.red){_.color=d.color,d.color=x.TreeNodeColorType.black,_.leftChild&&(_.leftChild.color=x.TreeNodeColorType.black);var C=d.rotateRight();i===d&&(i=C),h.color=x.TreeNodeColorType.black}else if((!_.leftChild||_.leftChild.color===x.TreeNodeColorType.black)&&_.rightChild&&_.rightChild.color===x.TreeNodeColorType.red){_.color=x.TreeNodeColorType.red,_.rightChild&&(_.rightChild.color=x.TreeNodeColorType.black);var C=_.rotateLeft();i===_&&(i=C),p(h)}else(!_.leftChild||_.leftChild.color===x.TreeNodeColorType.black)&&(!_.rightChild||_.rightChild.color===x.TreeNodeColorType.black)&&(_.color=x.TreeNodeColorType.red,p(d))}},y=function(h){for(var d=h;d.leftChild||d.rightChild;){if(d.rightChild){d=o(d.rightChild);var _=h.key;h.key=d.key,d.key=_;var C=h.value;h.value=d.value,d.value=C,h=d}if(d.leftChild){d=s(d.leftChild);var _=h.key;h.key=d.key,d.key=_;var C=h.value;h.value=d.value,d.value=C,h=d}}p(d),d&&d.remove(),--n,i.color=x.TreeNodeColorType.black},w=function(h,d){if(!h||h.key===void 0)return!1;var _=w(h.leftChild,d);return _||d(h)?!0:w(h.rightChild,d)};this.eraseElementByPos=function(h){if(h<0||h>=n)throw new Error("pos must more than 0 and less than set's size");var d=0;w(i,function(_){return h===d?(y(_),!0):(++d,!1)})},this.eraseElementByKey=function(h){if(!this.empty()){var d=I(i,h);d===void 0||d.key===void 0||e(d.key,h)!==0||y(d)}};var S=function(h,d){if(!h||h.key===void 0)throw new Error("unknown error");var _=e(d,h.key);return _<0?h.leftChild?S(h.leftChild,d):(h.leftChild=new x,h.leftChild.parent=h,h.leftChild.brother=h.rightChild,h.rightChild&&(h.rightChild.brother=h.leftChild),h.leftChild):_>0?h.rightChild?S(h.rightChild,d):(h.rightChild=new x,h.rightChild.parent=h,h.rightChild.brother=h.leftChild,h.leftChild&&(h.leftChild.brother=h.rightChild),h.rightChild):h},E=function(h){var d=h.parent;if(!d){if(h===i)return;throw new Error("unknown error")}if(d.color!==x.TreeNodeColorType.black&&d.color===x.TreeNodeColorType.red){var _=d.brother,C=d.parent;if(!C)throw new Error("unknown error");if(_&&_.color===x.TreeNodeColorType.red)_.color=d.color=x.TreeNodeColorType.black,C.color=x.TreeNodeColorType.red,E(C);else if(!_||_.color===x.TreeNodeColorType.black){if(d===C.leftChild){if(h===d.leftChild){d.color=x.TreeNodeColorType.black,C.color=x.TreeNodeColorType.red;var M=C.rotateRight();C===i&&(i=M)}else if(h===d.rightChild){var M=d.rotateLeft();C===i&&(i=M),E(d)}}else if(d===C.rightChild){if(h===d.leftChild){var M=d.rotateRight();C===i&&(i=M),E(d)}else if(h===d.rightChild){d.color=x.TreeNodeColorType.black,C.color=x.TreeNodeColorType.red;var M=C.rotateLeft();C===i&&(i=M)}}}}};this.setElement=function(h,d){if(h==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(d==null){this.eraseElementByKey(h);return}if(this.empty()){++n,i.key=h,i.value=d,i.color=x.TreeNodeColorType.black;return}var _=S(i,h);if(_.key!==void 0&&e(_.key,h)===0){_.value=d;return}++n,_.key=h,_.value=d,E(_),i.color=x.TreeNodeColorType.black};var I=function(h,d){if(!(!h||h.key===void 0)){var _=e(d,h.key);return _<0?I(h.leftChild,d):_>0?I(h.rightChild,d):h}};this.find=function(h){return!!I(i,h)},this.getElementByKey=function(h){var d=I(i,h);if((d==null?void 0:d.key)===void 0||(d==null?void 0:d.value)===void 0)throw new Error("unknown error");return d.value},this.union=function(h){var d=this;h.forEach(function(_){var C=_.key,M=_.value;return d.setElement(C,M)})},this.getHeight=function(){if(this.empty())return 0;var h=function(d){return d?Math.max(h(d.leftChild),h(d.rightChild))+1:1};return h(i)};var B=function(h){return rl(this,function(d){switch(d.label){case 0:return!h||h.key===void 0||h.value===void 0?[2]:[5,$t(B(h.leftChild))];case 1:return d.sent(),[4,{key:h.key,value:h.value}];case 2:return d.sent(),[5,$t(B(h.rightChild))];case 3:return d.sent(),[2]}})};this[Symbol.iterator]=function(){return B(i)},t.forEach(function(h){var d=h.key,_=h.value;return r.setElement(d,_)}),Object.freeze(this)}Object.freeze(Te);var nl=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(g){return c([l,g])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(g){l=[6,g],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},il=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Y.initSize=1<<4;Y.maxSize=1<<30;Y.sigma=.75;Y.treeifyThreshold=8;Y.untreeifyThreshold=6;Y.minTreeifySize=64;function Y(t,e,r){var n=this;if(t===void 0&&(t=[]),e===void 0&&(e=Y.initSize),r=r||function(c){var l=0,g="";if(typeof c=="number")l=Math.floor(c),l=(l<<5)-l,l=l&l;else{typeof c!="string"?g=JSON.stringify(c):g=c;for(var p=0;p<g.length;p++){var y=g.charCodeAt(p);l=(l<<5)-l+y,l=l&l}}return l^=l>>>16,l},(e&e-1)!==0)throw new Error("initBucketNum must be 2 to the power of n");var i=0,o=[],s=Math.max(Y.initSize,Math.min(Y.maxSize,e));this.size=function(){return i},this.empty=function(){return i===0},this.clear=function(){i=0,s=e,o=[]},this.forEach=function(c){var l=0;o.forEach(function(g){g.forEach(function(p){c(p,l++)})})};var a=function(c){if(!(c>=Y.maxSize)){s=c*2;var l=[];o.forEach(function(g,p){if(!g.empty()){if(g instanceof K&&g.size()===1){var y=g.front();if(y===void 0)throw new Error("unknown error");l[r(y)&s-1]=new K([y])}else if(g instanceof ze){var w=new K,S=new K;g.forEach(function(B){var h=r(B);(h&c)===0?w.pushBack(B):S.pushBack(B)}),w.size()>Y.untreeifyThreshold?l[p]=new ze(w):w.size()&&(l[p]=w),S.size()>Y.untreeifyThreshold?l[p+c]=new ze(S):S.size()&&(l[p+c]=S)}else{var E=new K,I=new K;g.forEach(function(B){var h=r(B);(h&c)===0?E.pushBack(B):I.pushBack(B)}),E.size()&&(l[p]=E),I.size()&&(l[p+c]=I)}o[p].clear()}}),o=l}};this.insert=function(c){if(c==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var l=r(c)&s-1;if(!o[l])o[l]=new K([c]),++i;else{var g=o[l].size();if(o[l]instanceof K){if(o[l].find(c))return;o[l].pushBack(c),o[l].size()>=Y.treeifyThreshold&&(o[l]=new ze(o[l]))}else o[l].insert(c);var p=o[l].size();i+=p-g}i>s*Y.sigma&&a.call(this,s)},this.eraseElementByValue=function(c){var l=r(c)&s-1;if(!!o[l]){var g=o[l].size();o[l].eraseElementByValue(c),o[l]instanceof ze&&o[l].size()<=Y.untreeifyThreshold&&(o[l]=new K(o[l]));var p=o[l].size();i+=p-g}},this.find=function(c){var l=r(c)&s-1;return o[l]?o[l].find(c):!1},this[Symbol.iterator]=function(){return function(){var c,l,g,p,y,w,S;return nl(this,function(E){switch(E.label){case 0:c=0,E.label=1;case 1:if(!(c<s))return[3,10];for(;c<s&&!o[c];)++c;if(c>=s)return[3,10];E.label=2;case 2:E.trys.push([2,7,8,9]),l=(w=void 0,il(o[c])),g=l.next(),E.label=3;case 3:return g.done?[3,6]:(p=g.value,[4,p]);case 4:E.sent(),E.label=5;case 5:return g=l.next(),[3,3];case 6:return[3,9];case 7:return y=E.sent(),w={error:y},[3,9];case 8:try{g&&!g.done&&(S=l.return)&&S.call(l)}finally{if(w)throw w.error}return[7];case 9:return++c,[3,1];case 10:return[2]}})}()},t.forEach(function(c){return n.insert(c)}),Object.freeze(this)}Object.freeze(Y);var ol=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(g){return c([l,g])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(g){l=[6,g],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},rt=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};X.initSize=1<<4;X.maxSize=1<<30;X.sigma=.75;X.treeifyThreshold=8;X.untreeifyThreshold=6;X.minTreeifySize=64;function X(t,e,r){var n=this;if(t===void 0&&(t=[]),e===void 0&&(e=X.initSize),r=r||function(c){var l,g,p=0,y="";if(typeof c=="number")p=Math.floor(c),p=(p<<5)-p,p=p&p;else{typeof c!="string"?y=JSON.stringify(c):y=c;try{for(var w=rt(y),S=w.next();!S.done;S=w.next()){var E=S.value,I=E.charCodeAt(0);p=(p<<5)-p+I,p=p&p}}catch(B){l={error:B}}finally{try{S&&!S.done&&(g=w.return)&&g.call(w)}finally{if(l)throw l.error}}}return p^=p>>>16,p},(e&e-1)!==0)throw new Error("initBucketNum must be 2 to the power of n");var i=0,o=[],s=Math.max(X.initSize,Math.min(X.maxSize,e));this.size=function(){return i},this.empty=function(){return i===0},this.clear=function(){i=0,s=e,o=[]},this.forEach=function(c){var l=0;o.forEach(function(g){g.forEach(function(p){c(p,l++)})})};var a=function(c){if(!(c>=X.maxSize)){s=c*2;var l=[];o.forEach(function(g,p){if(!g.empty()){if(g instanceof K&&g.size()===1){var y=g.front(),w=y.key,S=y.value;l[r(w)&s-1]=new K([{key:w,value:S}])}else if(g instanceof Te){var E=new K,I=new K;g.forEach(function(d){var _=r(d.key);(_&c)===0?E.pushBack(d):I.pushBack(d)}),E.size()>X.untreeifyThreshold?l[p]=new Te(E):E.size()&&(l[p]=E),I.size()>X.untreeifyThreshold?l[p+c]=new Te(I):I.size()&&(l[p+c]=I)}else{var B=new K,h=new K;g.forEach(function(d){var _=r(d.key);(_&c)===0?B.pushBack(d):h.pushBack(d)}),B.size()&&(l[p]=B),h.size()&&(l[p+c]=h)}o[p].clear()}}),o=l}};this.setElement=function(c,l){var g,p;if(c==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(l==null){this.eraseElementByKey(c);return}var y=r(c)&s-1;if(!o[y])++i,o[y]=new K([{key:c,value:l}]);else{var w=o[y].size();if(o[y]instanceof K){try{for(var S=rt(o[y]),E=S.next();!E.done;E=S.next()){var I=E.value;if(I.key===c){I.value=l;return}}}catch(h){g={error:h}}finally{try{E&&!E.done&&(p=S.return)&&p.call(S)}finally{if(g)throw g.error}}o[y].pushBack({key:c,value:l}),o[y].size()>=X.treeifyThreshold&&(o[y]=new Te(o[y]))}else o[y].setElement(c,l);var B=o[y].size();i+=B-w}i>s*X.sigma&&a.call(this,s)},this.getElementByKey=function(c){var l,g,p=r(c)&s-1;if(!!o[p]){if(o[p]instanceof Te)return o[p].getElementByKey(c);try{for(var y=rt(o[p]),w=y.next();!w.done;w=y.next()){var S=w.value;if(S.key===c)return S.value}}catch(E){l={error:E}}finally{try{w&&!w.done&&(g=y.return)&&g.call(y)}finally{if(l)throw l.error}}}},this.eraseElementByKey=function(c){var l,g,p=r(c)&s-1;if(!!o[p]){var y=o[p].size();if(o[p]instanceof Te)o[p].eraseElementByKey(c),o[p].size()<=X.untreeifyThreshold&&(o[p]=new K(o[p]));else{var w=-1;try{for(var S=rt(o[p]),E=S.next();!E.done;E=S.next()){var I=E.value;if(++w,I.key===c){o[p].eraseElementByPos(w);break}}}catch(h){l={error:h}}finally{try{E&&!E.done&&(g=S.return)&&g.call(S)}finally{if(l)throw l.error}}}var B=o[p].size();i+=B-y}},this.find=function(c){var l,g,p=r(c)&s-1;if(!o[p])return!1;if(o[p]instanceof Te)return o[p].find(c);try{for(var y=rt(o[p]),w=y.next();!w.done;w=y.next()){var S=w.value;if(S.key===c)return!0}}catch(E){l={error:E}}finally{try{w&&!w.done&&(g=y.return)&&g.call(y)}finally{if(l)throw l.error}}return!1},this[Symbol.iterator]=function(){return function(){var c,l,g,p,y,w,S;return ol(this,function(E){switch(E.label){case 0:c=0,E.label=1;case 1:if(!(c<s))return[3,10];for(;c<s&&!o[c];)++c;if(c>=s)return[3,10];E.label=2;case 2:E.trys.push([2,7,8,9]),l=(w=void 0,rt(o[c])),g=l.next(),E.label=3;case 3:return g.done?[3,6]:(p=g.value,[4,p]);case 4:E.sent(),E.label=5;case 5:return g=l.next(),[3,3];case 6:return[3,9];case 7:return y=E.sent(),w={error:y},[3,9];case 8:try{g&&!g.done&&(S=l.return)&&S.call(l)}finally{if(w)throw w.error}return[7];case 9:return++c,[3,1];case 10:return[2]}})}()},t.forEach(function(c){var l=c.key,g=c.value;return n.setElement(l,g)}),Object.freeze(this)}Object.freeze(X);var sl=Object.freeze(Object.defineProperty({__proto__:null,Vector:Si,Stack:Ti,Queue:Ci,LinkList:K,Deque:D,PriorityQueue:xi,Set:ze,Map:Te,HashSet:Y,HashMap:X},Symbol.toStringTag,{value:"Module"})),al=Yn(sl),ye={exports:{}},ht=1e3,pt=ht*60,dt=pt*60,Qe=dt*24,ll=Qe*7,fl=Qe*365.25,ul=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return cl(t);if(r==="number"&&isFinite(t))return e.long?pl(t):hl(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function cl(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fl;case"weeks":case"week":case"w":return r*ll;case"days":case"day":case"d":return r*Qe;case"hours":case"hour":case"hrs":case"hr":case"h":return r*dt;case"minutes":case"minute":case"mins":case"min":case"m":return r*pt;case"seconds":case"second":case"secs":case"sec":case"s":return r*ht;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function hl(t){var e=Math.abs(t);return e>=Qe?Math.round(t/Qe)+"d":e>=dt?Math.round(t/dt)+"h":e>=pt?Math.round(t/pt)+"m":e>=ht?Math.round(t/ht)+"s":t+"ms"}function pl(t){var e=Math.abs(t);return e>=Qe?zt(t,e,Qe,"day"):e>=dt?zt(t,e,dt,"hour"):e>=pt?zt(t,e,pt,"minute"):e>=ht?zt(t,e,ht,"second"):t+" ms"}function zt(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}function dl(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=ul,r.destroy=l,Object.keys(t).forEach(g=>{r[g]=t[g]}),r.names=[],r.skips=[],r.formatters={};function e(g){let p=0;for(let y=0;y<g.length;y++)p=(p<<5)-p+g.charCodeAt(y),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(g){let p,y=null,w,S;function E(...I){if(!E.enabled)return;const B=E,h=Number(new Date),d=h-(p||h);B.diff=d,B.prev=p,B.curr=h,p=h,I[0]=r.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let _=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(M,j)=>{if(M==="%%")return"%";_++;const ae=r.formatters[j];if(typeof ae=="function"){const he=I[_];M=ae.call(B,he),I.splice(_,1),_--}return M}),r.formatArgs.call(B,I),(B.log||r.log).apply(B,I)}return E.namespace=g,E.useColors=r.useColors(),E.color=r.selectColor(g),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(w!==r.namespaces&&(w=r.namespaces,S=r.enabled(g)),S),set:I=>{y=I}}),typeof r.init=="function"&&r.init(E),E}function n(g,p){const y=r(this.namespace+(typeof p=="undefined"?":":p)+g);return y.log=this.log,y}function i(g){r.save(g),r.namespaces=g,r.names=[],r.skips=[];let p;const y=(typeof g=="string"?g:"").split(/[\s,]+/),w=y.length;for(p=0;p<w;p++)!y[p]||(g=y[p].replace(/\*/g,".*?"),g[0]==="-"?r.skips.push(new RegExp("^"+g.slice(1)+"$")):r.names.push(new RegExp("^"+g+"$")))}function o(){const g=[...r.names.map(a),...r.skips.map(a).map(p=>"-"+p)].join(",");return r.enable(""),g}function s(g){if(g[g.length-1]==="*")return!0;let p,y;for(p=0,y=r.skips.length;p<y;p++)if(r.skips[p].test(g))return!1;for(p=0,y=r.names.length;p<y;p++)if(r.names[p].test(g))return!0;return!1}function a(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function c(g){return g instanceof Error?g.stack||g.message:g}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var yl=dl;(function(t,e){e.formatArgs=n,e.save=i,e.load=o,e.useColors=r,e.storage=s(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let g=0,p=0;c[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(g++,y==="%c"&&(p=g))}),c.splice(p,0,l)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process!="undefined"&&"env"in process&&(c={}.DEBUG),c}function s(){try{return localStorage}catch{}}t.exports=yl(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(ye,ye.exports);const gl=al.Set,we=ye.exports("number-allocator:trace"),Ln=ye.exports("number-allocator:error");function yt(t,e){this.low=t,this.high=e}yt.prototype.equals=function(t){return this.low===t.low&&this.high===t.high};yt.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0};function Ee(t,e){if(!(this instanceof Ee))return new Ee(t,e);this.min=t,this.max=e,this.ss=new gl([],(r,n)=>r.compare(n)),we("Create"),this.clear()}Ee.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low};Ee.prototype.alloc=function(){if(this.ss.size()===0)return we("alloc():empty"),null;const t=this.ss.front(),e=t.low;return e+1<=t.high?++t.low:this.ss.eraseElementByPos(0),we("alloc():"+e),e};Ee.prototype.use=function(t){const e=new yt(t,t),r=this.ss.lowerBound(e);if(r){if(r.equals(e))return this.ss.eraseElementByValue(r),we("use():"+t),!0;if(r.low>t)return!1;if(r.low===t)return++r.low,we("use():"+t),!0;if(r.high===t)return--r.high,we("use():"+t),!0;const n=r.low;return r.low=t+1,this.ss.insert(new yt(n,t-1)),we("use():"+t),!0}return we("use():failed"),!1};Ee.prototype.free=function(t){if(t<this.min||t>this.max){Ln("free():"+t+" is out of range");return}const e=new yt(t,t),r=this.ss.lowerBound(e);if(r){if(r.low<=t&&t<=r.high){Ln("free():"+t+" has already been vacant");return}if(r===this.ss.front())t+1===r.low?--r.low:this.ss.insert(e);else{const n=this.ss.reverseLowerBound(e);n.high+1===t?t+1===r.low?(this.ss.eraseElementByValue(n),r.low=n.low):n.high=t:t+1===r.low?r.low=t:this.ss.insert(e)}}else{if(r===this.ss.front()){this.ss.insert(e);return}const n=this.ss.reverseLowerBound(e);n.high+1===t?n.high=t:this.ss.insert(e)}we("free():"+t)};Ee.prototype.clear=function(){we("clear()"),this.ss.clear(),this.ss.insert(new yt(this.min,this.max))};Ee.prototype.intervalCount=function(){return this.ss.size()};Ee.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)};var vl=Ee;const bl=vl;Ei.NumberAllocator=bl;const wl=Qa,_l=Ei.NumberAllocator;function Fe(t){if(!(this instanceof Fe))return new Fe(t);t>0&&(this.aliasToTopic=new wl({max:t}),this.topicToAlias={},this.numberAllocator=new _l(1,t),this.max=t,this.length=0)}Fe.prototype.put=function(t,e){if(e===0||e>this.max)return!1;const r=this.aliasToTopic.get(e);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(e,t),this.topicToAlias[t]=e,this.numberAllocator.use(e),this.length=this.aliasToTopic.length,!0};Fe.prototype.getTopicByAlias=function(t){return this.aliasToTopic.get(t)};Fe.prototype.getAliasByTopic=function(t){const e=this.topicToAlias[t];return typeof e!="undefined"&&this.aliasToTopic.get(e),e};Fe.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0};Fe.prototype.getLruAlias=function(){const t=this.numberAllocator.firstVacant();return t||this.aliasToTopic.keys()[this.aliasToTopic.length-1]};var ml=Fe,cr={},hr={exports:{}};const{Buffer:de}=Ie,ki=Symbol.for("BufferList");function z(t){if(!(this instanceof z))return new z(t);z._init.call(this,t)}z._init=function(e){Object.defineProperty(this,ki,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};z.prototype._new=function(e){return new z(e)};z.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){const i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};z.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};z.prototype.get=function(e){if(e>this.length||e<0)return;const r=this._offset(e);return this._bufs[r[0]][r[1]]};z.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};z.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||de.alloc(0);const o=!!e,s=this._offset(n),a=i-n;let c=a,l=o&&r||0,g=s[1];if(n===0&&i===this.length){if(!o)return this._bufs.length===1?this._bufs[0]:de.concat(this._bufs,this.length);for(let p=0;p<this._bufs.length;p++)this._bufs[p].copy(e,l),l+=this._bufs[p].length;return e}if(c<=this._bufs[s[0]].length-g)return o?this._bufs[s[0]].copy(e,r,g,g+c):this._bufs[s[0]].slice(g,g+c);o||(e=de.allocUnsafe(a));for(let p=s[0];p<this._bufs.length;p++){const y=this._bufs[p].length-g;if(c>y)this._bufs[p].copy(e,l,g),l+=y;else{this._bufs[p].copy(e,l,g,g+c),l+=y;break}c-=y,g&&(g=0)}return e.length>l?e.slice(0,l):e};z.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();const n=this._offset(e),i=this._offset(r),o=this._bufs.slice(n[0],i[0]+1);return i[1]===0?o.pop():o[o.length-1]=o[o.length-1].slice(0,i[1]),n[1]!==0&&(o[0]=o[0].slice(n[1])),this._new(o)};z.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};z.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};z.prototype.duplicate=function(){const e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};z.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(de.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(de.from(e));return this};z.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};z.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=de.from([t]):typeof t=="string"?t=de.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=de.from(t.buffer,t.byteOffset,t.byteLength):de.isBuffer(t)||(t=de.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;const n=this._offset(e);let i=n[0],o=n[1];for(;i<this._bufs.length;i++){const s=this._bufs[i];for(;o<s.length;)if(s.length-o>=t.length){const c=s.indexOf(t,o);if(c!==-1)return this._reverseOffset([i,c]);o=s.length-t.length+1}else{const c=this._reverseOffset([i,o]);if(this._match(c,t))return c;o++}o=0}return-1};z.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(r){t[r]===null?z.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:z.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();z.prototype._isBufferList=function(e){return e instanceof z||z.isBufferList(e)};z.isBufferList=function(e){return e!=null&&e[ki]};var El=z;const tn=ke.exports.Duplex,Sl=_e.exports,Rt=El;function te(t){if(!(this instanceof te))return new te(t);if(typeof t=="function"){this._callback=t;const e=function(n){this._callback&&(this._callback(n),this._callback=null)}.bind(this);this.on("pipe",function(n){n.on("error",e)}),this.on("unpipe",function(n){n.removeListener("error",e)}),t=null}Rt._init.call(this,t),tn.call(this)}Sl(te,tn);Object.assign(te.prototype,Rt.prototype);te.prototype._new=function(e){return new te(e)};te.prototype._write=function(e,r,n){this._appendBuffer(e),typeof n=="function"&&n()};te.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};te.prototype.end=function(e){tn.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};te.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)};te.prototype._isBufferList=function(e){return e instanceof te||e instanceof Rt||te.isBufferList(e)};te.isBufferList=Rt.isBufferList;hr.exports=te;hr.exports.BufferListStream=te;hr.exports.BufferList=Rt;class Tl{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}var Cl=Tl,rn={exports:{}};(function(t){const e=t.exports;e.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},e.codes={};for(const n in e.types){const i=e.types[n];e.codes[i]=n}e.CMD_SHIFT=4,e.CMD_MASK=240,e.DUP_MASK=8,e.QOS_MASK=3,e.QOS_SHIFT=1,e.RETAIN_MASK=1,e.VARBYTEINT_MASK=127,e.VARBYTEINT_FIN_MASK=128,e.VARBYTEINT_MAX=268435455,e.SESSIONPRESENT_MASK=1,e.SESSIONPRESENT_HEADER=Buffer.from([e.SESSIONPRESENT_MASK]),e.CONNACK_HEADER=Buffer.from([e.codes.connack<<e.CMD_SHIFT]),e.USERNAME_MASK=128,e.PASSWORD_MASK=64,e.WILL_RETAIN_MASK=32,e.WILL_QOS_MASK=24,e.WILL_QOS_SHIFT=3,e.WILL_FLAG_MASK=4,e.CLEAN_SESSION_MASK=2,e.CONNECT_HEADER=Buffer.from([e.codes.connect<<e.CMD_SHIFT]),e.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},e.propertiesCodes={};for(const n in e.properties){const i=e.properties[n];e.propertiesCodes[i]=n}e.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function r(n){return[0,1,2].map(i=>[0,1].map(o=>[0,1].map(s=>{const a=Buffer.alloc(1);return a.writeUInt8(e.codes[n]<<e.CMD_SHIFT|(o?e.DUP_MASK:0)|i<<e.QOS_SHIFT|s,0,!0),a})))}e.PUBLISH_HEADER=r("publish"),e.SUBSCRIBE_HEADER=r("subscribe"),e.SUBSCRIBE_OPTIONS_QOS_MASK=3,e.SUBSCRIBE_OPTIONS_NL_MASK=1,e.SUBSCRIBE_OPTIONS_NL_SHIFT=2,e.SUBSCRIBE_OPTIONS_RAP_MASK=1,e.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,e.SUBSCRIBE_OPTIONS_RH_MASK=3,e.SUBSCRIBE_OPTIONS_RH_SHIFT=4,e.SUBSCRIBE_OPTIONS_RH=[0,16,32],e.SUBSCRIBE_OPTIONS_NL=4,e.SUBSCRIBE_OPTIONS_RAP=8,e.SUBSCRIBE_OPTIONS_QOS=[0,1,2],e.UNSUBSCRIBE_HEADER=r("unsubscribe"),e.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},e.SUBACK_HEADER=Buffer.from([e.codes.suback<<e.CMD_SHIFT]),e.VERSION3=Buffer.from([3]),e.VERSION4=Buffer.from([4]),e.VERSION5=Buffer.from([5]),e.VERSION131=Buffer.from([131]),e.VERSION132=Buffer.from([132]),e.QOS=[0,1,2].map(n=>Buffer.from([n])),e.EMPTY={pingreq:Buffer.from([e.codes.pingreq<<4,0]),pingresp:Buffer.from([e.codes.pingresp<<4,0]),disconnect:Buffer.from([e.codes.disconnect<<4,0])}})(rn);const xl=hr.exports,kl=ge,Fn=Cl,q=rn.exports,R=ye.exports("mqtt-packet:parser");class Xt extends kl{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof Xt?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Xt().parser(e)}_resetState(){R("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new Fn,this.error=null,this._list=xl(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),R("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,R("parse: state complete. _stateCounter is now: %d",this._stateCounter),R("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return R("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=q.types[e>>q.CMD_SHIFT],this.packet.retain=(e&q.RETAIN_MASK)!==0,this.packet.qos=e>>q.QOS_SHIFT&q.QOS_MASK,this.packet.dup=(e&q.DUP_MASK)!==0,R("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),R("_parseLength %d",e.value),!!e}_parsePayload(){R("_parsePayload: payload %O",this._list);let e=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return R("_parsePayload complete result: %s",e),e}_parseConnect(){R("_parseConnect");let e,r,n,i;const o={},s=this.packet,a=this._parseString();if(a===null)return this._emitError(new Error("Cannot parse protocolId"));if(a!=="MQTT"&&a!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(s.protocolId=a,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.protocolVersion=this._list.readUInt8(this._pos),s.protocolVersion>=128&&(s.bridgeMode=!0,s.protocolVersion=s.protocolVersion-128),s.protocolVersion!==3&&s.protocolVersion!==4&&s.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(o.username=this._list.readUInt8(this._pos)&q.USERNAME_MASK,o.password=this._list.readUInt8(this._pos)&q.PASSWORD_MASK,o.will=this._list.readUInt8(this._pos)&q.WILL_FLAG_MASK,o.will&&(s.will={},s.will.retain=(this._list.readUInt8(this._pos)&q.WILL_RETAIN_MASK)!==0,s.will.qos=(this._list.readUInt8(this._pos)&q.WILL_QOS_MASK)>>q.WILL_QOS_SHIFT),s.clean=(this._list.readUInt8(this._pos)&q.CLEAN_SESSION_MASK)!==0,this._pos++,s.keepalive=this._parseNum(),s.keepalive===-1)return this._emitError(new Error("Packet too short"));if(s.protocolVersion===5){const l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(s.properties=l)}const c=this._parseString();if(c===null)return this._emitError(new Error("Packet too short"));if(s.clientId=c,R("_parseConnect: packet.clientId: %s",s.clientId),o.will){if(s.protocolVersion===5){const l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(s.will.properties=l)}if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse will topic"));if(s.will.topic=e,R("_parseConnect: packet.will.topic: %s",s.will.topic),r=this._parseBuffer(),r===null)return this._emitError(new Error("Cannot parse will payload"));s.will.payload=r,R("_parseConnect: packet.will.paylaod: %s",s.will.payload)}if(o.username){if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse username"));s.username=i,R("_parseConnect: packet.username: %s",s.username)}if(o.password){if(n=this._parseBuffer(),n===null)return this._emitError(new Error("Cannot parse password"));s.password=n}return this.settings=s,R("_parseConnect: complete"),s}_parseConnack(){R("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&q.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}R("_parseConnack: complete")}_parsePublish(){R("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}e.payload=this._list.slice(this._pos,e.length),R("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){R("_parseSubscribe");const e=this.packet;let r,n,i,o,s,a,c;if(e.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(e.properties=l)}for(;this._pos<e.length;){if(r=this._parseString(),r===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));n=this._parseByte(),i=n&q.SUBSCRIBE_OPTIONS_QOS_MASK,a=(n>>q.SUBSCRIBE_OPTIONS_NL_SHIFT&q.SUBSCRIBE_OPTIONS_NL_MASK)!==0,s=(n>>q.SUBSCRIBE_OPTIONS_RAP_SHIFT&q.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,o=n>>q.SUBSCRIBE_OPTIONS_RH_SHIFT&q.SUBSCRIBE_OPTIONS_RH_MASK,c={topic:r,qos:i},this.settings.protocolVersion===5?(c.nl=a,c.rap=s,c.rh=o):this.settings.bridgeMode&&(c.rh=0,c.rap=!0,c.nl=!0),R("_parseSubscribe: push subscription `%s` to subscription",c),e.subscriptions.push(c)}}}_parseSuback(){R("_parseSuback");const e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){R("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}for(;this._pos<e.length;){const r=this._parseString();if(r===null)return this._emitError(new Error("Cannot parse topic"));R("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),e.unsubscriptions.push(r)}}}_parseUnsuback(){R("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const r=this._parseProperties();for(Object.getOwnPropertyNames(r).length&&(e.properties=r),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){R("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(e.length>2?(e.reasonCode=this._parseByte(),R("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,e.length>3)){const r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}return!0}_parseDisconnect(){const e=this.packet;if(R("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?e.reasonCode=this._parseByte():e.reasonCode=0;const r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}return R("_parseDisconnect result: true"),!0}_parseAuth(){R("_parseAuth");const e=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const r=this._parseProperties();return Object.getOwnPropertyNames(r).length&&(e.properties=r),R("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),e.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(R("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const r=this._parseNum(),n=r+this._pos;if(r===-1||n>this._list.length||n>this.packet.length)return null;const i=this._list.toString("utf8",this._pos,n);return this._pos+=r,R("_parseString: result: %s",i),i}_parseStringPair(){return R("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),r=e+this._pos;if(e===-1||r>this._list.length||r>this.packet.length)return null;const n=this._list.slice(this._pos,r);return this._pos+=e,R("_parseBuffer: result: %o",n),n}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,R("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,R("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){R("_parseVarByteNum");const r=4;let n=0,i=1,o=0,s=!1,a;const c=this._pos?this._pos:0;for(;n<r&&c+n<this._list.length;){if(a=this._list.readUInt8(c+n++),o+=i*(a&q.VARBYTEINT_MASK),i*=128,(a&q.VARBYTEINT_FIN_MASK)===0){s=!0;break}if(this._list.length<=n)break}return!s&&n===r&&this._list.length>=n&&this._emitError(new Error("Invalid variable byte integer")),c&&(this._pos+=n),s=s?e?{bytes:n,value:o}:o:!1,R("_parseVarByteNum: result: %o",s),s}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),R("_parseByte: result: %o",e),e}_parseByType(e){switch(R("_parseByType: type: %s",e),e){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){R("_parseProperties");const e=this._parseVarByteNum(),n=this._pos+e,i={};for(;this._pos<n;){const o=this._parseByte();if(!o)return this._emitError(new Error("Cannot parse property code type")),!1;const s=q.propertiesCodes[o];if(!s)return this._emitError(new Error("Unknown property")),!1;if(s==="userProperties"){i[s]||(i[s]=Object.create(null));const a=this._parseByType(q.propertiesTypes[s]);if(i[s][a.name])if(Array.isArray(i[s][a.name]))i[s][a.name].push(a.value);else{const c=i[s][a.name];i[s][a.name]=[c],i[s][a.name].push(a.value)}else i[s][a.name]=a.value;continue}i[s]?Array.isArray(i[s])?i[s].push(this._parseByType(q.propertiesTypes[s])):(i[s]=[i[s]],i[s].push(this._parseByType(q.propertiesTypes[s]))):i[s]=this._parseByType(q.propertiesTypes[s])}return i}_newPacket(){return R("_newPacket"),this.packet&&(this._list.consume(this.packet.length),R("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),R("_newPacket: new packet"),this.packet=new Fn,this._pos=0,!0}_emitError(e){R("_emitError"),this.error=e,this.emit("error",e)}}var Al=Xt;const Il=65536,Ai={},Bl=Buffer.isBuffer(Buffer.from([1,2]).subarray(0,1));function Ii(t){const e=Buffer.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(t&255,0+1),e}function Rl(){for(let t=0;t<Il;t++)Ai[t]=Ii(t)}function Pl(t){let r=0,n=0;const i=Buffer.allocUnsafe(4);do r=t%128|0,t=t/128|0,t>0&&(r=r|128),i.writeUInt8(r,n++);while(t>0&&n<4);return t>0&&(n=0),Bl?i.subarray(0,n):i.slice(0,n)}function Ml(t){const e=Buffer.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var Ol={cache:Ai,generateCache:Rl,generateNumber:Ii,genBufVariableByteInt:Pl,generate4ByteBuffer:Ml},$r={exports:{}};typeof process=="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?$r.exports={nextTick:Ll}:$r.exports=process;function Ll(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,s;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(o=new Array(i-1),s=0;s<o.length;)o[s++]=arguments[s];return process.nextTick(function(){t.apply(null,o)})}}const P=rn.exports,Fl=Buffer.allocUnsafe(0),Ul=Buffer.from([0]),Pt=Ol,Dl=$r.exports.nextTick,fe=ye.exports("mqtt-packet:writeToStream"),Jt=Pt.cache,Nl=Pt.generateNumber,jl=Pt.generateCache,zr=Pt.genBufVariableByteInt,ql=Pt.generate4ByteBuffer;let re=Vr,Zt=!0;function Bi(t,e,r){switch(fe("generate called"),e.cork&&(e.cork(),Dl($l,e)),Zt&&(Zt=!1,jl()),fe("generate: packet.cmd: %s",t.cmd),t.cmd){case"connect":return zl(t,e);case"connack":return Vl(t,e,r);case"publish":return Hl(t,e,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return Wl(t,e,r);case"subscribe":return Kl(t,e,r);case"suback":return Ql(t,e,r);case"unsubscribe":return Gl(t,e,r);case"unsuback":return Yl(t,e,r);case"pingreq":case"pingresp":return Xl(t,e);case"disconnect":return Jl(t,e,r);case"auth":return Zl(t,e,r);default:return e.emit("error",new Error("Unknown command")),!1}}Object.defineProperty(Bi,"cacheNumbers",{get(){return re===Vr},set(t){t?((!Jt||Object.keys(Jt).length===0)&&(Zt=!0),re=Vr):(Zt=!1,re=ef)}});function $l(t){t.uncork()}function zl(t,e,r){const n=t||{},i=n.protocolId||"MQTT";let o=n.protocolVersion||4;const s=n.will;let a=n.clean;const c=n.keepalive||0,l=n.clientId||"",g=n.username,p=n.password,y=n.properties;a===void 0&&(a=!0);let w=0;if(!i||typeof i!="string"&&!Buffer.isBuffer(i))return e.emit("error",new Error("Invalid protocolId")),!1;if(w+=i.length+2,o!==3&&o!==4&&o!==5)return e.emit("error",new Error("Invalid protocol version")),!1;if(w+=1,(typeof l=="string"||Buffer.isBuffer(l))&&(l||o>=4)&&(l||a))w+=Buffer.byteLength(l)+2;else{if(o<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(a*1===0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof c!="number"||c<0||c>65535||c%1!==0)return e.emit("error",new Error("Invalid keepalive")),!1;if(w+=2,w+=1,o===5){var S=Ue(e,y);if(!S)return!1;w+=S.length}if(s){if(typeof s!="object")return e.emit("error",new Error("Invalid will")),!1;if(!s.topic||typeof s.topic!="string")return e.emit("error",new Error("Invalid will topic")),!1;if(w+=Buffer.byteLength(s.topic)+2,w+=2,s.payload)if(s.payload.length>=0)typeof s.payload=="string"?w+=Buffer.byteLength(s.payload):w+=s.payload.length;else return e.emit("error",new Error("Invalid will payload")),!1;var E={};if(o===5){if(E=Ue(e,s.properties),!E)return!1;w+=E.length}}let I=!1;if(g!=null)if(qn(g))I=!0,w+=Buffer.byteLength(g)+2;else return e.emit("error",new Error("Invalid username")),!1;if(p!=null){if(!I)return e.emit("error",new Error("Username is required to use password")),!1;if(qn(p))w+=Ri(p)+2;else return e.emit("error",new Error("Invalid password")),!1}e.write(P.CONNECT_HEADER),ce(e,w),nt(e,i),n.bridgeMode&&(o+=128),e.write(o===131?P.VERSION131:o===132?P.VERSION132:o===4?P.VERSION4:o===5?P.VERSION5:P.VERSION3);let B=0;return B|=g!=null?P.USERNAME_MASK:0,B|=p!=null?P.PASSWORD_MASK:0,B|=s&&s.retain?P.WILL_RETAIN_MASK:0,B|=s&&s.qos?s.qos<<P.WILL_QOS_SHIFT:0,B|=s?P.WILL_FLAG_MASK:0,B|=a?P.CLEAN_SESSION_MASK:0,e.write(Buffer.from([B])),re(e,c),o===5&&S.write(),nt(e,l),s&&(o===5&&E.write(),Ge(e,s.topic),nt(e,s.payload)),g!=null&&nt(e,g),p!=null&&nt(e,p),!0}function Vl(t,e,r){const n=r?r.protocolVersion:4,i=t||{},o=n===5?i.reasonCode:i.returnCode,s=i.properties;let a=2;if(typeof o!="number")return e.emit("error",new Error("Invalid return code")),!1;let c=null;if(n===5){if(c=Ue(e,s),!c)return!1;a+=c.length}return e.write(P.CONNACK_HEADER),ce(e,a),e.write(i.sessionPresent?P.SESSIONPRESENT_HEADER:Ul),e.write(Buffer.from([o])),c!=null&&c.write(),!0}function Hl(t,e,r){fe("publish: packet: %o",t);const n=r?r.protocolVersion:4,i=t||{},o=i.qos||0,s=i.retain?P.RETAIN_MASK:0,a=i.topic,c=i.payload||Fl,l=i.messageId,g=i.properties;let p=0;if(typeof a=="string")p+=Buffer.byteLength(a)+2;else if(Buffer.isBuffer(a))p+=a.length+2;else return e.emit("error",new Error("Invalid topic")),!1;if(Buffer.isBuffer(c)?p+=c.length:p+=Buffer.byteLength(c),o&&typeof l!="number")return e.emit("error",new Error("Invalid messageId")),!1;o&&(p+=2);let y=null;if(n===5){if(y=Ue(e,g),!y)return!1;p+=y.length}return e.write(P.PUBLISH_HEADER[o][i.dup?1:0][s?1:0]),ce(e,p),re(e,Ri(a)),e.write(a),o>0&&re(e,l),y!=null&&y.write(),fe("publish: payload: %o",c),e.write(c)}function Wl(t,e,r){const n=r?r.protocolVersion:4,i=t||{},o=i.cmd||"puback",s=i.messageId,a=i.dup&&o==="pubrel"?P.DUP_MASK:0;let c=0;const l=i.reasonCode,g=i.properties;let p=n===5?3:2;if(o==="pubrel"&&(c=1),typeof s!="number")return e.emit("error",new Error("Invalid messageId")),!1;let y=null;if(n===5&&typeof g=="object"){if(y=Mt(e,g,r,p),!y)return!1;p+=y.length}return e.write(P.ACKS[o][c][a][0]),ce(e,p),re(e,s),n===5&&e.write(Buffer.from([l])),y!==null&&y.write(),!0}function Kl(t,e,r){fe("subscribe: packet: ");const n=r?r.protocolVersion:4,i=t||{},o=i.dup?P.DUP_MASK:0,s=i.messageId,a=i.subscriptions,c=i.properties;let l=0;if(typeof s!="number")return e.emit("error",new Error("Invalid messageId")),!1;l+=2;let g=null;if(n===5){if(g=Ue(e,c),!g)return!1;l+=g.length}if(typeof a=="object"&&a.length)for(let y=0;y<a.length;y+=1){const w=a[y].topic,S=a[y].qos;if(typeof w!="string")return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof S!="number")return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(n===5){if(typeof(a[y].nl||!1)!="boolean")return e.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(a[y].rap||!1)!="boolean")return e.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const B=a[y].rh||0;if(typeof B!="number"||B>2)return e.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}l+=Buffer.byteLength(w)+2+1}else return e.emit("error",new Error("Invalid subscriptions")),!1;fe("subscribe: writing to stream: %o",P.SUBSCRIBE_HEADER),e.write(P.SUBSCRIBE_HEADER[1][o?1:0][0]),ce(e,l),re(e,s),g!==null&&g.write();let p=!0;for(const y of a){const w=y.topic,S=y.qos,E=+y.nl,I=+y.rap,B=y.rh;let h;Ge(e,w),h=P.SUBSCRIBE_OPTIONS_QOS[S],n===5&&(h|=E?P.SUBSCRIBE_OPTIONS_NL:0,h|=I?P.SUBSCRIBE_OPTIONS_RAP:0,h|=B?P.SUBSCRIBE_OPTIONS_RH[B]:0),p=e.write(Buffer.from([h]))}return p}function Ql(t,e,r){const n=r?r.protocolVersion:4,i=t||{},o=i.messageId,s=i.granted,a=i.properties;let c=0;if(typeof o!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(c+=2,typeof s=="object"&&s.length)for(let g=0;g<s.length;g+=1){if(typeof s[g]!="number")return e.emit("error",new Error("Invalid qos vector")),!1;c+=1}else return e.emit("error",new Error("Invalid qos vector")),!1;let l=null;if(n===5){if(l=Mt(e,a,r,c),!l)return!1;c+=l.length}return e.write(P.SUBACK_HEADER),ce(e,c),re(e,o),l!==null&&l.write(),e.write(Buffer.from(s))}function Gl(t,e,r){const n=r?r.protocolVersion:4,i=t||{},o=i.messageId,s=i.dup?P.DUP_MASK:0,a=i.unsubscriptions,c=i.properties;let l=0;if(typeof o!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(l+=2,typeof a=="object"&&a.length)for(let y=0;y<a.length;y+=1){if(typeof a[y]!="string")return e.emit("error",new Error("Invalid unsubscriptions")),!1;l+=Buffer.byteLength(a[y])+2}else return e.emit("error",new Error("Invalid unsubscriptions")),!1;let g=null;if(n===5){if(g=Ue(e,c),!g)return!1;l+=g.length}e.write(P.UNSUBSCRIBE_HEADER[1][s?1:0][0]),ce(e,l),re(e,o),g!==null&&g.write();let p=!0;for(let y=0;y<a.length;y++)p=Ge(e,a[y]);return p}function Yl(t,e,r){const n=r?r.protocolVersion:4,i=t||{},o=i.messageId,s=i.dup?P.DUP_MASK:0,a=i.granted,c=i.properties,l=i.cmd,g=0;let p=2;if(typeof o!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(n===5)if(typeof a=="object"&&a.length)for(let w=0;w<a.length;w+=1){if(typeof a[w]!="number")return e.emit("error",new Error("Invalid qos vector")),!1;p+=1}else return e.emit("error",new Error("Invalid qos vector")),!1;let y=null;if(n===5){if(y=Mt(e,c,r,p),!y)return!1;p+=y.length}return e.write(P.ACKS[l][g][s][0]),ce(e,p),re(e,o),y!==null&&y.write(),n===5&&e.write(Buffer.from(a)),!0}function Xl(t,e,r){return e.write(P.EMPTY[t.cmd])}function Jl(t,e,r){const n=r?r.protocolVersion:4,i=t||{},o=i.reasonCode,s=i.properties;let a=n===5?1:0,c=null;if(n===5){if(c=Mt(e,s,r,a),!c)return!1;a+=c.length}return e.write(Buffer.from([P.codes.disconnect<<4])),ce(e,a),n===5&&e.write(Buffer.from([o])),c!==null&&c.write(),!0}function Zl(t,e,r){const n=r?r.protocolVersion:4,i=t||{},o=i.reasonCode,s=i.properties;let a=n===5?1:0;n!==5&&e.emit("error",new Error("Invalid mqtt version for auth packet"));const c=Mt(e,s,r,a);return c?(a+=c.length,e.write(Buffer.from([P.codes.auth<<4])),ce(e,a),e.write(Buffer.from([o])),c!==null&&c.write(),!0):!1}const Un={};function ce(t,e){if(e>P.VARBYTEINT_MAX)return t.emit("error",new Error(`Invalid variable byte integer: ${e}`)),!1;let r=Un[e];return r||(r=zr(e),e<16384&&(Un[e]=r)),fe("writeVarByteInt: writing to stream: %o",r),t.write(r)}function Ge(t,e){const r=Buffer.byteLength(e);return re(t,r),fe("writeString: %s",e),t.write(e,"utf8")}function Dn(t,e,r){Ge(t,e),Ge(t,r)}function Vr(t,e){return fe("writeNumberCached: number: %d",e),fe("writeNumberCached: %o",Jt[e]),t.write(Jt[e])}function ef(t,e){const r=Nl(e);return fe("writeNumberGenerated: %o",r),t.write(r)}function tf(t,e){const r=ql(e);return fe("write4ByteNumber: %o",r),t.write(r)}function nt(t,e){typeof e=="string"?Ge(t,e):e?(re(t,e.length),t.write(e)):re(t,0)}function Ue(t,e){if(typeof e!="object"||e.length!=null)return{length:1,write(){jn(t,{},0)}};let r=0;function n(o,s){const a=P.propertiesTypes[o];let c=0;switch(a){case"byte":{if(typeof s!="boolean")return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=1+1;break}case"int8":{if(typeof s!="number"||s<0||s>255)return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=1+1;break}case"binary":{if(s&&s===null)return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=1+Buffer.byteLength(s)+2;break}case"int16":{if(typeof s!="number"||s<0||s>65535)return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=1+2;break}case"int32":{if(typeof s!="number"||s<0||s>4294967295)return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=1+4;break}case"var":{if(typeof s!="number"||s<0||s>268435455)return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=1+Buffer.byteLength(zr(s));break}case"string":{if(typeof s!="string")return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=1+2+Buffer.byteLength(s.toString());break}case"pair":{if(typeof s!="object")return t.emit("error",new Error(`Invalid ${o}: ${s}`)),!1;c+=Object.getOwnPropertyNames(s).reduce((l,g)=>{const p=s[g];return Array.isArray(p)?l+=p.reduce((y,w)=>(y+=1+2+Buffer.byteLength(g.toString())+2+Buffer.byteLength(w.toString()),y),0):l+=1+2+Buffer.byteLength(g.toString())+2+Buffer.byteLength(s[g].toString()),l},0);break}default:return t.emit("error",new Error(`Invalid property ${o}: ${s}`)),!1}return c}if(e)for(const o in e){let s=0,a=0;const c=e[o];if(Array.isArray(c))for(let l=0;l<c.length;l++){if(a=n(o,c[l]),!a)return!1;s+=a}else{if(a=n(o,c),!a)return!1;s=a}if(!s)return!1;r+=s}return{length:Buffer.byteLength(zr(r))+r,write(){jn(t,e,r)}}}function Mt(t,e,r,n){const i=["reasonString","userProperties"],o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let s=Ue(t,e);if(o)for(;n+s.length>o;){const a=i.shift();if(a&&e[a])delete e[a],s=Ue(t,e);else return!1}return s}function Nn(t,e,r){switch(P.propertiesTypes[e]){case"byte":{t.write(Buffer.from([P.properties[e]])),t.write(Buffer.from([+r]));break}case"int8":{t.write(Buffer.from([P.properties[e]])),t.write(Buffer.from([r]));break}case"binary":{t.write(Buffer.from([P.properties[e]])),nt(t,r);break}case"int16":{t.write(Buffer.from([P.properties[e]])),re(t,r);break}case"int32":{t.write(Buffer.from([P.properties[e]])),tf(t,r);break}case"var":{t.write(Buffer.from([P.properties[e]])),ce(t,r);break}case"string":{t.write(Buffer.from([P.properties[e]])),Ge(t,r);break}case"pair":{Object.getOwnPropertyNames(r).forEach(i=>{const o=r[i];Array.isArray(o)?o.forEach(s=>{t.write(Buffer.from([P.properties[e]])),Dn(t,i.toString(),s.toString())}):(t.write(Buffer.from([P.properties[e]])),Dn(t,i.toString(),o.toString()))});break}default:return t.emit("error",new Error(`Invalid property ${e} value: ${r}`)),!1}}function jn(t,e,r){ce(t,r);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==null){const i=e[n];if(Array.isArray(i))for(let o=0;o<i.length;o++)Nn(t,n,i[o]);else Nn(t,n,i)}}function Ri(t){return t?t instanceof Buffer?t.length:Buffer.byteLength(t):0}function qn(t){return typeof t=="string"||t instanceof Buffer}var Pi=Bi;const rf=Pi,nf=ge;function of(t,e){const r=new sf;return rf(t,r,e),r.concat()}class sf extends nf{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const r=new Array(this._array.length),n=this._array;let i=0,o;for(o=0;o<n.length&&n[o]!==void 0;o++)typeof n[o]!="string"?r[o]=n[o].length:r[o]=Buffer.byteLength(n[o]),e+=r[o];const s=Buffer.allocUnsafe(e);for(o=0;o<n.length&&n[o]!==void 0;o++)typeof n[o]!="string"?(n[o].copy(s,i),i+=r[o]):(s.write(n[o],i),i+=r[o]);return s}}var af=of;cr.parser=Al.parser;cr.generate=af;cr.writeToStream=Pi;function De(){if(!(this instanceof De))return new De;this.nextId=Math.max(1,Math.floor(Math.random()*65535))}De.prototype.allocate=function(){const t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t};De.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1};De.prototype.register=function(t){return!0};De.prototype.deallocate=function(t){};De.prototype.clear=function(){};var lf=De;function ff(t,e,r){var n=this;this._callback=t,this._args=r,this._interval=setInterval(t,e,this._args),this.reschedule=function(i){i||(i=n._interval),n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,i,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}function uf(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new ff(arguments[0],arguments[1],t)}var cf=uf,hf=pf;function lt(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function pf(t){if(t=t||{},t.circles)return df(t);return t.proto?n:r;function e(i,o){for(var s=Object.keys(i),a=new Array(s.length),c=0;c<s.length;c++){var l=s[c],g=i[l];typeof g!="object"||g===null?a[l]=g:g instanceof Date?a[l]=new Date(g):ArrayBuffer.isView(g)?a[l]=lt(g):a[l]=o(g)}return a}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return e(i,r);if(i instanceof Map)return new Map(e(Array.from(i),r));if(i instanceof Set)return new Set(e(Array.from(i),r));var o={};for(var s in i)if(Object.hasOwnProperty.call(i,s)!==!1){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(e(Array.from(a),r)):a instanceof Set?o[s]=new Set(e(Array.from(a),r)):ArrayBuffer.isView(a)?o[s]=lt(a):o[s]=r(a)}return o}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return e(i,n);if(i instanceof Map)return new Map(e(Array.from(i),n));if(i instanceof Set)return new Set(e(Array.from(i),n));var o={};for(var s in i){var a=i[s];typeof a!="object"||a===null?o[s]=a:a instanceof Date?o[s]=new Date(a):a instanceof Map?o[s]=new Map(e(Array.from(a),n)):a instanceof Set?o[s]=new Set(e(Array.from(a),n)):ArrayBuffer.isView(a)?o[s]=lt(a):o[s]=n(a)}return o}}function df(t){var e=[],r=[];return t.proto?o:i;function n(s,a){for(var c=Object.keys(s),l=new Array(c.length),g=0;g<c.length;g++){var p=c[g],y=s[p];if(typeof y!="object"||y===null)l[p]=y;else if(y instanceof Date)l[p]=new Date(y);else if(ArrayBuffer.isView(y))l[p]=lt(y);else{var w=e.indexOf(y);w!==-1?l[p]=r[w]:l[p]=a(y)}}return l}function i(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,i);if(s instanceof Map)return new Map(n(Array.from(s),i));if(s instanceof Set)return new Set(n(Array.from(s),i));var a={};e.push(s),r.push(a);for(var c in s)if(Object.hasOwnProperty.call(s,c)!==!1){var l=s[c];if(typeof l!="object"||l===null)a[c]=l;else if(l instanceof Date)a[c]=new Date(l);else if(l instanceof Map)a[c]=new Map(n(Array.from(l),i));else if(l instanceof Set)a[c]=new Set(n(Array.from(l),i));else if(ArrayBuffer.isView(l))a[c]=lt(l);else{var g=e.indexOf(l);g!==-1?a[c]=r[g]:a[c]=i(l)}}return e.pop(),r.pop(),a}function o(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return n(s,o);if(s instanceof Map)return new Map(n(Array.from(s),o));if(s instanceof Set)return new Set(n(Array.from(s),o));var a={};e.push(s),r.push(a);for(var c in s){var l=s[c];if(typeof l!="object"||l===null)a[c]=l;else if(l instanceof Date)a[c]=new Date(l);else if(l instanceof Map)a[c]=new Map(n(Array.from(l),o));else if(l instanceof Set)a[c]=new Set(n(Array.from(l),o));else if(ArrayBuffer.isView(l))a[c]=lt(l);else{var g=e.indexOf(l);g!==-1?a[c]=r[g]:a[c]=o(l)}}return e.pop(),r.pop(),a}}var yf=hf();function gf(t){const e=t.split("/");for(let r=0;r<e.length;r++)if(e[r]!=="+"){if(e[r]==="#")return r===e.length-1;if(e[r].indexOf("+")!==-1||e[r].indexOf("#")!==-1)return!1}return!0}function vf(t){if(t.length===0)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!gf(t[e]))return t[e];return null}var bf={validateTopics:vf};const Mi=ge.EventEmitter,er=_i,wf=ja,_f=ml,Oi=cr,mf=lf,Ef=ke.exports.Writable,Sf=_e.exports,Tf=cf,Li=yf,Fi=bf,pr=Wr,T=ye.exports("mqttjs:client"),nn=process?process.nextTick:function(t){setTimeout(t,0)},on=Ct.setImmediate||function(t){nn(t)},$n={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0},Cf=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],tr={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function xf(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function kf(t,e){if(t.options.protocolVersion===5&&e.cmd==="publish"){let r;e.properties&&(r=e.properties.topicAlias);const n=e.topic.toString();if(t.topicAliasSend)if(r){if(n.length!==0&&(T("applyTopicAlias :: register topic: %s - alias: %d",n,r),!t.topicAliasSend.put(n,r)))return T("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}else n.length!==0&&(t.options.autoAssignTopicAlias?(r=t.topicAliasSend.getAliasByTopic(n),r?(e.topic="",e.properties=Ut(Ft({},e.properties),{topicAlias:r}),T("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",n,r)):(r=t.topicAliasSend.getLruAlias(),t.topicAliasSend.put(n,r),e.properties=Ut(Ft({},e.properties),{topicAlias:r}),T("applyTopicAlias :: auto assign topic: %s - alias: %d",n,r))):t.options.autoUseTopicAlias&&(r=t.topicAliasSend.getAliasByTopic(n),r&&(e.topic="",e.properties=Ut(Ft({},e.properties),{topicAlias:r}),T("applyTopicAlias :: auto use topic: %s - alias: %d",n,r))));else if(r)return T("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}}function Ui(t,e){let r;e.properties&&(r=e.properties.topicAlias);let n=e.topic.toString();if(n.length===0){if(typeof r=="undefined")return new Error("Unregistered Topic Alias");if(n=t.topicAliasSend.getTopicByAlias(r),typeof n=="undefined")return new Error("Unregistered Topic Alias");e.topic=n}r&&delete e.properties.topicAlias}function ft(t,e,r){T("sendPacket :: packet: %O",e),T("sendPacket :: emitting `packetsend`"),t.emit("packetsend",e),T("sendPacket :: writing to stream");const n=Oi.writeToStream(e,t.stream,t.options);T("sendPacket :: writeToStream result %s",n),!n&&r&&r!==J?(T("sendPacket :: handle events on `drain` once through callback."),t.stream.once("drain",r)):r&&(T("sendPacket :: invoking cb"),r())}function Af(t){t&&(T("flush: queue exists? %b",!!t),Object.keys(t).forEach(function(e){typeof t[e].cb=="function"&&(t[e].cb(new Error("Connection closed")),delete t[e])}))}function If(t){t&&(T("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(t).forEach(function(e){t[e].volatile&&typeof t[e].cb=="function"&&(t[e].cb(new Error("Connection closed")),delete t[e])}))}function zn(t,e,r,n){T("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let i=e,o;if(i.cmd==="publish"&&(i=Li(e),o=Ui(t,i),o))return r&&r(o);t.outgoingStore.put(i,function(a){if(a)return r&&r(a);n(),ft(t,e,r)})}function J(t){T("nop ::",t)}function L(t,e){let r;const n=this;if(!(this instanceof L))return new L(t,e);this.options=e||{};for(r in $n)typeof this.options[r]=="undefined"?this.options[r]=$n[r]:this.options[r]=e[r];T("MqttClient :: options.protocol",e.protocol),T("MqttClient :: options.protocolVersion",e.protocolVersion),T("MqttClient :: options.username",e.username),T("MqttClient :: options.keepalive",e.keepalive),T("MqttClient :: options.reconnectPeriod",e.reconnectPeriod),T("MqttClient :: options.rejectUnauthorized",e.rejectUnauthorized),T("MqttClient :: options.topicAliasMaximum",e.topicAliasMaximum),this.options.clientId=typeof e.clientId=="string"?e.clientId:xf(),T("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=e.protocolVersion===5&&e.customHandleAcks?e.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=t,this.messageIdProvider=typeof this.options.messageIdProvider=="undefined"?new mf:this.options.messageIdProvider,this.outgoingStore=e.outgoingStore||new er,this.incomingStore=e.incomingStore||new er,this.queueQoSZero=e.queueQoSZero===void 0?!0:e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,e.topicAliasMaximum>0&&(e.topicAliasMaximum>65535?T("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new wf(e.topicAliasMaximum)),this.on("connect",function(){const i=this.queue;function o(){const s=i.shift();T("deliver :: entry %o",s);let a=null;if(!s){n._resubscribe();return}a=s.packet,T("deliver :: call _sendPacket for %o",a);let c=!0;a.messageId&&a.messageId!==0&&(n.messageIdProvider.register(a.messageId)||(c=!1)),c?n._sendPacket(a,function(l){s.cb&&s.cb(l),o()}):(T("messageId: %d has already used. The message is skipped and removed.",a.messageId),o())}T("connect :: sending queued packets"),o()}),this.on("close",function(){T("close :: connected set to `false`"),this.connected=!1,T("close :: clearing connackTimer"),clearTimeout(this.connackTimer),T("close :: clearing ping timer"),n.pingTimer!==null&&(n.pingTimer.clear(),n.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),T("close :: calling _setupReconnect"),this._setupReconnect()}),Mi.call(this),T("MqttClient :: setting up stream"),this._setupStream()}Sf(L,Mi);L.prototype._setupStream=function(){const t=this,e=new Ef,r=Oi.parser(this.options);let n=null;const i=[];T("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),T("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),r.on("packet",function(l){T("parser :: on packet push to packets array."),i.push(l)});function o(){if(i.length)nn(s);else{const l=n;n=null,l()}}function s(){T("work :: getting next packet in queue");const l=i.shift();if(l)T("work :: packet pulled from queue"),t._handlePacket(l,o);else{T("work :: no packets in queue");const g=n;n=null,T("work :: done flag is %s",!!g),g&&g()}}e._write=function(l,g,p){n=p,T("writable stream :: parsing buffer"),r.parse(l),s()};function a(l){T("streamErrorHandler :: error",l.message),Cf.includes(l.code)?(T("streamErrorHandler :: emitting error"),t.emit("error",l)):J(l)}T("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",a),this.stream.on("close",function(){T("(%s)stream :: on close",t.options.clientId),If(t.outgoing),T("stream: emit close to MqttClient"),t.emit("close")}),T("_setupStream: sending packet `connect`");const c=Object.create(this.options);if(c.cmd="connect",this.topicAliasRecv&&(c.properties||(c.properties={}),this.topicAliasRecv&&(c.properties.topicAliasMaximum=this.topicAliasRecv.max)),ft(this,c),r.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return t.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const l=pr({cmd:"auth",reasonCode:0},this.options.authPacket);ft(this,l)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){T("!!connectTimeout hit!! Calling _cleanUp with force `true`"),t._cleanUp(!0)},this.options.connectTimeout)};L.prototype._handlePacket=function(t,e){const r=this.options;if(r.protocolVersion===5&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<t.length)return this.emit("error",new Error("exceeding packets size "+t.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(T("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"auth":this._handleAuth(t),e();break;case"pingresp":this._handlePingresp(t),e();break;case"disconnect":this._handleDisconnect(t),e();break}};L.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t&&t!==J?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting};L.prototype.publish=function(t,e,r,n){T("publish :: message `%s` to topic `%s`",e,t);const i=this.options;if(typeof r=="function"&&(n=r,r=null),r=pr({qos:0,retain:!1,dup:!1},r),this._checkDisconnecting(n))return this;const s=this,a=function(){let c=0;if((r.qos===1||r.qos===2)&&(c=s._nextId(),c===null))return T("No messageId left"),!1;const l={cmd:"publish",topic:t,payload:e,qos:r.qos,retain:r.retain,messageId:c,dup:r.dup};switch(i.protocolVersion===5&&(l.properties=r.properties),T("publish :: qos",r.qos),r.qos){case 1:case 2:s.outgoing[l.messageId]={volatile:!1,cb:n||J},T("MqttClient:publish: packet cmd: %s",l.cmd),s._sendPacket(l,void 0,r.cbStorePut);break;default:T("MqttClient:publish: packet cmd: %s",l.cmd),s._sendPacket(l,n,r.cbStorePut);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!a())&&this._storeProcessingQueue.push({invoke:a,cbStorePut:r.cbStorePut,callback:n}),this};L.prototype.subscribe=function(){const t=this,e=new Array(arguments.length);for(let p=0;p<arguments.length;p++)e[p]=arguments[p];const r=[];let n=e.shift();const i=n.resubscribe;let o=e.pop()||J,s=e.pop();const a=this.options.protocolVersion;delete n.resubscribe,typeof n=="string"&&(n=[n]),typeof o!="function"&&(s=o,o=J);const c=Fi.validateTopics(n);if(c!==null)return on(o,new Error("Invalid topic "+c)),this;if(this._checkDisconnecting(o))return T("subscribe: discconecting true"),this;const l={qos:0};if(a===5&&(l.nl=!1,l.rap=!1,l.rh=0),s=pr(l,s),Array.isArray(n)?n.forEach(function(p){if(T("subscribe: array topic %s",p),!Object.prototype.hasOwnProperty.call(t._resubscribeTopics,p)||t._resubscribeTopics[p].qos<s.qos||i){const y={topic:p,qos:s.qos};a===5&&(y.nl=s.nl,y.rap=s.rap,y.rh=s.rh,y.properties=s.properties),T("subscribe: pushing topic `%s` and qos `%s` to subs list",y.topic,y.qos),r.push(y)}}):Object.keys(n).forEach(function(p){if(T("subscribe: object topic %s",p),!Object.prototype.hasOwnProperty.call(t._resubscribeTopics,p)||t._resubscribeTopics[p].qos<n[p].qos||i){const y={topic:p,qos:n[p].qos};a===5&&(y.nl=n[p].nl,y.rap=n[p].rap,y.rh=n[p].rh,y.properties=s.properties),T("subscribe: pushing `%s` to subs list",y),r.push(y)}}),!r.length)return o(null,[]),this;const g=function(){const p=t._nextId();if(p===null)return T("No messageId left"),!1;const y={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:p};if(s.properties&&(y.properties=s.properties),t.options.resubscribe){T("subscribe :: resubscribe true");const w=[];r.forEach(function(S){if(t.options.reconnectPeriod>0){const E={qos:S.qos};a===5&&(E.nl=S.nl||!1,E.rap=S.rap||!1,E.rh=S.rh||0,E.properties=S.properties),t._resubscribeTopics[S.topic]=E,w.push(S.topic)}}),t.messageIdToTopic[y.messageId]=w}return t.outgoing[y.messageId]={volatile:!0,cb:function(w,S){if(!w){const E=S.granted;for(let I=0;I<E.length;I+=1)r[I].qos=E[I]}o(w,r)}},T("subscribe :: call _sendPacket"),t._sendPacket(y),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!g())&&this._storeProcessingQueue.push({invoke:g,callback:o}),this};L.prototype.unsubscribe=function(){const t=this,e=new Array(arguments.length);for(let a=0;a<arguments.length;a++)e[a]=arguments[a];let r=e.shift(),n=e.pop()||J,i=e.pop();typeof r=="string"&&(r=[r]),typeof n!="function"&&(i=n,n=J);const o=Fi.validateTopics(r);if(o!==null)return on(n,new Error("Invalid topic "+o)),this;if(t._checkDisconnecting(n))return this;const s=function(){const a=t._nextId();if(a===null)return T("No messageId left"),!1;const c={cmd:"unsubscribe",qos:1,messageId:a};return typeof r=="string"?c.unsubscriptions=[r]:Array.isArray(r)&&(c.unsubscriptions=r),t.options.resubscribe&&c.unsubscriptions.forEach(function(l){delete t._resubscribeTopics[l]}),typeof i=="object"&&i.properties&&(c.properties=i.properties),t.outgoing[c.messageId]={volatile:!0,cb:n},T("unsubscribe: call _sendPacket"),t._sendPacket(c),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!s())&&this._storeProcessingQueue.push({invoke:s,callback:n}),this};L.prototype.end=function(t,e,r){const n=this;T("end :: (%s)",this.options.clientId),(t==null||typeof t!="boolean")&&(r=e||J,e=t,t=!1,typeof e!="object"&&(r=e,e=null,typeof r!="function"&&(r=J))),typeof e!="object"&&(r=e,e=null),T("end :: cb? %s",!!r),r=r||J;function i(){T("end :: closeStores: closing incoming and outgoing stores"),n.disconnected=!0,n.incomingStore.close(function(s){n.outgoingStore.close(function(a){if(T("end :: closeStores: emitting end"),n.emit("end"),r){const c=s||a;T("end :: closeStores: invoking callback with args"),r(c)}})}),n._deferredReconnect&&n._deferredReconnect()}function o(){T("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,t),n._cleanUp(t,()=>{T("end :: finish :: calling process.nextTick on closeStores"),nn(i.bind(n))},e)}return this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?(T("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,o,10))):(T("end :: (%s) :: immediately calling finish",n.options.clientId),o()),this)};L.prototype.removeOutgoingMessage=function(t){const e=this.outgoing[t]?this.outgoing[t].cb:null;return delete this.outgoing[t],this.outgoingStore.del({messageId:t},function(){e(new Error("Message removed"))}),this};L.prototype.reconnect=function(t){T("client reconnect");const e=this,r=function(){t?(e.options.incomingStore=t.incomingStore,e.options.outgoingStore=t.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new er,e.outgoingStore=e.options.outgoingStore||new er,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this};L.prototype._reconnect=function(){T("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),T("client already connected. disconnecting first.")):(T("_reconnect: calling _setupStream"),this._setupStream())};L.prototype._setupReconnect=function(){const t=this;!t.disconnecting&&!t.reconnectTimer&&t.options.reconnectPeriod>0?(this.reconnecting||(T("_setupReconnect :: emit `offline` state"),this.emit("offline"),T("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),T("_setupReconnect :: setting reconnectTimer for %d ms",t.options.reconnectPeriod),t.reconnectTimer=setInterval(function(){T("reconnectTimer :: reconnect triggered!"),t._reconnect()},t.options.reconnectPeriod)):T("_setupReconnect :: doing nothing...")};L.prototype._clearReconnect=function(){T("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)};L.prototype._cleanUp=function(t,e){const r=arguments[2];if(e&&(T("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",e)),T("_cleanUp :: forced? %s",t),t)this.options.reconnectPeriod===0&&this.options.clean&&Af(this.outgoing),T("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const n=pr({cmd:"disconnect"},r);T("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(n,on.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(T("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(T("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(T("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())};L.prototype._sendPacket=function(t,e,r){T("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||J,e=e||J;const n=kf(this,t);if(n){e(n);return}if(!this.connected){if(t.cmd==="auth"){this._shiftPingInterval(),ft(this,t,e);return}T("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(t,e,r);return}switch(this._shiftPingInterval(),t.cmd){case"publish":break;case"pubrel":zn(this,t,e,r);return;default:ft(this,t,e);return}switch(t.qos){case 2:case 1:zn(this,t,e,r);break;case 0:default:ft(this,t,e);break}T("_sendPacket :: (%s) ::  end",this.options.clientId)};L.prototype._storePacket=function(t,e,r){T("_storePacket :: packet: %o",t),T("_storePacket :: cb? %s",!!e),r=r||J;let n=t;if(n.cmd==="publish"){n=Li(t);const i=Ui(this,n);if(i)return e&&e(i)}(n.qos||0)===0&&this.queueQoSZero||n.cmd!=="publish"?this.queue.push({packet:n,cb:e}):n.qos>0?(e=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,function(i){if(i)return e&&e(i);r()})):e&&e(new Error("No connection to broker"))};L.prototype._setupPingTimer=function(){T("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=Tf(function(){t._checkPing()},this.options.keepalive*1e3))};L.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)};L.prototype._checkPing=function(){T("_checkPing :: checking ping..."),this.pingResp?(T("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(T("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))};L.prototype._handlePingresp=function(){this.pingResp=!0};L.prototype._handleConnack=function(t){T("_handleConnack");const e=this.options,n=e.protocolVersion===5?t.reasonCode:t.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}t.properties.topicAliasMaximum>0&&(this.topicAliasSend=new _f(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=t.properties.serverKeepAlive,this._shiftPingInterval()),t.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(n===0)this.reconnecting=!1,this._onConnect(t);else if(n>0){const i=new Error("Connection refused: "+tr[n]);i.code=n,this.emit("error",i)}};L.prototype._handleAuth=function(t){const r=this.options.protocolVersion,n=r===5?t.reasonCode:t.returnCode;if(r!==5){const o=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+r);o.code=n,this.emit("error",o);return}const i=this;this.handleAuth(t,function(o,s){if(o){i.emit("error",o);return}if(n===24)i.reconnecting=!1,i._sendPacket(s);else{const a=new Error("Connection refused: "+tr[n]);o.code=n,i.emit("error",a)}})};L.prototype.handleAuth=function(t,e){e()};L.prototype._handlePublish=function(t,e){T("_handlePublish: packet %o",t),e=typeof e!="undefined"?e:J;let r=t.topic.toString();const n=t.payload,i=t.qos,o=t.messageId,s=this,a=this.options,c=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let l;if(t.properties&&(l=t.properties.topicAlias),typeof l!="undefined")if(r.length===0)if(l>0&&l<=65535){const g=this.topicAliasRecv.getTopicByAlias(l);if(g)r=g,T("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",r,l);else{T("_handlePublish :: unregistered topic alias. alias: %d",l),this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{T("_handlePublish :: topic alias out of range. alias: %d",l),this.emit("error",new Error("Received Topic Alias is out of range"));return}else if(this.topicAliasRecv.put(r,l))T("_handlePublish :: registered topic: %s - alias: %d",r,l);else{T("_handlePublish :: topic alias out of range. alias: %d",l),this.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(T("_handlePublish: qos %d",i),i){case 2:{a.customHandleAcks(r,n,t,function(l,g){if(l instanceof Error||(g=l,l=null),l)return s.emit("error",l);if(c.indexOf(g)===-1)return s.emit("error",new Error("Wrong reason code for pubrec"));g?s._sendPacket({cmd:"pubrec",messageId:o,reasonCode:g},e):s.incomingStore.put(t,function(){s._sendPacket({cmd:"pubrec",messageId:o},e)})});break}case 1:{a.customHandleAcks(r,n,t,function(l,g){if(l instanceof Error||(g=l,l=null),l)return s.emit("error",l);if(c.indexOf(g)===-1)return s.emit("error",new Error("Wrong reason code for puback"));g||s.emit("message",r,n,t),s.handleMessage(t,function(p){if(p)return e&&e(p);s._sendPacket({cmd:"puback",messageId:o,reasonCode:g},e)})});break}case 0:this.emit("message",r,n,t),this.handleMessage(t,e);break;default:T("_handlePublish: unknown QoS. Doing nothing.");break}};L.prototype.handleMessage=function(t,e){e()};L.prototype._handleAck=function(t){const e=t.messageId,r=t.cmd;let n=null;const i=this.outgoing[e]?this.outgoing[e].cb:null,o=this;let s;if(!i){T("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(T("_handleAck :: packet type",r),r){case"pubcomp":case"puback":{const a=t.reasonCode;a&&a>0&&a!==16&&(s=new Error("Publish error: "+tr[a]),s.code=a,i(s,t)),delete this.outgoing[e],this.outgoingStore.del(t,i),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue();break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:e};const a=t.reasonCode;a&&a>0&&a!==16?(s=new Error("Publish error: "+tr[a]),s.code=a,i(s,t)):this._sendPacket(n);break}case"suback":{delete this.outgoing[e],this.messageIdProvider.deallocate(e);for(let a=0;a<t.granted.length;a++)if((t.granted[a]&128)!==0){const c=this.messageIdToTopic[e];c&&c.forEach(function(l){delete o._resubscribeTopics[l]})}this._invokeStoreProcessingQueue(),i(null,t);break}case"unsuback":{delete this.outgoing[e],this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue(),i(null);break}default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")};L.prototype._handlePubrel=function(t,e){T("handling pubrel packet"),e=typeof e!="undefined"?e:J;const r=t.messageId,n=this,i={cmd:"pubcomp",messageId:r};n.incomingStore.get(t,function(o,s){o?n._sendPacket(i,e):(n.emit("message",s.topic,s.payload,s),n.handleMessage(s,function(a){if(a)return e(a);n.incomingStore.del(s,J),n._sendPacket(i,e)}))})};L.prototype._handleDisconnect=function(t){this.emit("disconnect",t)};L.prototype._nextId=function(){return this.messageIdProvider.allocate()};L.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()};L.prototype._resubscribe=function(){T("_resubscribe");const t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&t.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){T("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){const r={};r[t[e]]=this._resubscribeTopics[t[e]],r.resubscribe=!0,this.subscribe(r,{properties:r[t[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1};L.prototype._onConnect=function(t){if(this.disconnected){this.emit("connect",t);return}const e=this;this.connackPacket=t,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;function r(){let n=e.outgoingStore.createStream();function i(){e._storeProcessing=!1,e._packetIdsDuringStoreProcessing={}}e.once("close",o),n.on("error",function(a){i(),e._flushStoreProcessingQueue(),e.removeListener("close",o),e.emit("error",a)});function o(){n.destroy(),n=null,e._flushStoreProcessingQueue(),i()}function s(){if(!n)return;e._storeProcessing=!0;const a=n.read(1);let c;if(!a){n.once("readable",s);return}if(e._packetIdsDuringStoreProcessing[a.messageId]){s();return}!e.disconnecting&&!e.reconnectTimer?(c=e.outgoing[a.messageId]?e.outgoing[a.messageId].cb:null,e.outgoing[a.messageId]={volatile:!1,cb:function(l,g){c&&c(l,g),s()}},e._packetIdsDuringStoreProcessing[a.messageId]=!0,e.messageIdProvider.register(a.messageId)?e._sendPacket(a):T("messageId: %d has already used.",a.messageId)):n.destroy&&n.destroy()}n.on("end",function(){let a=!0;for(const c in e._packetIdsDuringStoreProcessing)if(!e._packetIdsDuringStoreProcessing[c]){a=!1;break}a?(i(),e.removeListener("close",o),e._invokeAllStoreProcessingQueue(),e.emit("connect",t)):r()}),s()}r()};L.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const t=this._storeProcessingQueue[0];if(t&&t.invoke())return this._storeProcessingQueue.shift(),!0}return!1};L.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););};L.prototype._flushStoreProcessingQueue=function(){for(const t of this._storeProcessingQueue)t.cbStorePut&&t.cbStorePut(new Error("Connection closed")),t.callback&&t.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)};var Bf=L;const Rf=ge,Pf=ye.exports("mqttjs:tcp");function Mf(t,e){e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost";const r=e.port,n=e.hostname;return Pf("port %d and host %s",r,n),Rf.createConnection(r,n)}var Vn=Mf;const Of=ge,Lf=ge,Ff=ye.exports("mqttjs:tls");function Uf(t,e){e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",Lf.isIP(e.host)===0&&(e.servername=e.host),e.rejectUnauthorized=e.rejectUnauthorized!==!1,delete e.path,Ff("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);const r=Of.connect(e);r.on("secureConnect",function(){e.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",n)});function n(i){e.rejectUnauthorized&&t.emit("error",i),r.end()}return r.on("error",n),r}var Or=Uf,sn={exports:{}},Df=Di;function Di(t,e){if(t&&e)return Di(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=t.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}var Ni=Df;sn.exports=Ni(Kt);sn.exports.strict=Ni(ji);Kt.proto=Kt(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Kt(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ji(this)},configurable:!0})});function Kt(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function ji(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}var Nf=sn.exports,jf=function(){},qf=function(t){return t.setHeader&&typeof t.abort=="function"},$f=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},qi=function(t,e,r){if(typeof e=="function")return qi(t,null,e);e||(e={}),r=Nf(r||jf);var n=t._writableState,i=t._readableState,o=e.readable||e.readable!==!1&&t.readable,s=e.writable||e.writable!==!1&&t.writable,a=!1,c=function(){t.writable||l()},l=function(){s=!1,o||r.call(t)},g=function(){o=!1,s||r.call(t)},p=function(I){r.call(t,I?new Error("exited with error code: "+I):null)},y=function(I){r.call(t,I)},w=function(){process.nextTick(S)},S=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},E=function(){t.req.on("finish",l)};return qf(t)?(t.on("complete",l),t.on("abort",w),t.req?E():t.on("request",E)):s&&!n&&(t.on("end",c),t.on("close",c)),$f(t)&&t.on("exit",p),t.on("end",g),t.on("finish",l),e.error!==!1&&t.on("error",y),t.on("close",w),function(){a=!0,t.removeListener("complete",l),t.removeListener("abort",w),t.removeListener("request",E),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("exit",p),t.removeListener("end",g),t.removeListener("error",y),t.removeListener("close",w)}},zf=qi,Vf=Hf;function Hf(t){var e=t._readableState;return e?e.objectMode||typeof t._duplexState=="number"?t.read():t.read(Wf(e)):null}function Wf(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}var dr=ke.exports,$i=zf,Kf=_e.exports,Qf=Vf,zi=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),Hr=function(t,e){t._corked?t.once("uncork",e):e()},Gf=function(t,e){t._autoDestroy&&t.destroy(e)},Vi=function(t,e){return function(r){r?Gf(t,r.message==="premature close"?null:r):e&&!t._ended&&t.end()}},Yf=function(t,e){if(!t||t._writableState&&t._writableState.finished)return e();if(t._writableState)return t.end(e);t.end(),e()},Xf=function(){},Jf=function(t){return new dr.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},Z=function(t,e,r){if(!(this instanceof Z))return new Z(t,e,r);dr.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||r.autoDestroy!==!1,this._forwardDestroy=!r||r.destroy!==!1,this._forwardEnd=!r||r.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};Kf(Z,dr.Duplex);Z.obj=function(t,e,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new Z(t,e,r)};Z.prototype.cork=function(){++this._corked===1&&this.emit("cork")};Z.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};Z.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.end();return}var e=this,r=$i(t,{writable:!0,readable:!1},Vi(this,this._forwardEnd)),n=function(){var o=e._ondrain;e._ondrain=null,o&&o()},i=function(){e._writable.removeListener("drain",n),r()};this._unwrite&&process.nextTick(n),this._writable=t,this._writable.on("drain",n),this._unwrite=i,this.uncork()};Z.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.push(null),this.resume();return}var e=this,r=$i(t,{writable:!1,readable:!0},Vi(this)),n=function(){e._forward()},i=function(){e.push(null)},o=function(){e._readable2.removeListener("readable",n),e._readable2.removeListener("end",i),r()};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:Jf(t),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=o,this._forward()};Z.prototype._read=function(){this._drained=!0,this._forward()};Z.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var t;this._drained&&(t=Qf(this._readable2))!==null;)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}};Z.prototype.destroy=function(t,e){if(e||(e=Xf),this.destroyed)return e(null);this.destroyed=!0;var r=this;process.nextTick(function(){r._destroy(t),e(null)})};Z.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};Z.prototype._write=function(t,e,r){if(!this.destroyed){if(this._corked)return Hr(this,this._write.bind(this,t,e,r));if(t===zi)return this._finish(r);if(!this._writable)return r();this._writable.write(t)===!1?this._ondrain=r:this.destroyed||r()}};Z.prototype._finish=function(t){var e=this;this.emit("preend"),Hr(this,function(){Yf(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),Hr(e,t)})})};Z.prototype.end=function(t,e,r){return typeof t=="function"?this.end(null,null,t):typeof e=="function"?this.end(t,null,e):(this._ended=!0,t&&this.write(t),!this._writableState.ending&&!this._writableState.destroyed&&this.write(zi),dr.Writable.prototype.end.call(this,r))};var an=Z;const{Buffer:Hn}=Ie,Zf=ke.exports.Transform,eu=an;let xe,Qt,se;function tu(){const t=new Zf;return t._write=function(e,r,n){xe.send({data:e.buffer,success:function(){n()},fail:function(i){n(new Error(i))}})},t._flush=function(r){xe.close({success:function(){r()}})},t}function ru(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}function nu(t,e){const r=t.protocol==="wxs"?"wss":"ws";let n=r+"://"+t.hostname+t.path;return t.port&&t.port!==80&&t.port!==443&&(n=r+"://"+t.hostname+":"+t.port+t.path),typeof t.transformWsUrl=="function"&&(n=t.transformWsUrl(n,t,e)),n}function iu(){xe.onOpen(function(){se.setReadable(Qt),se.setWritable(Qt),se.emit("connect")}),xe.onMessage(function(t){let e=t.data;e instanceof ArrayBuffer?e=Hn.from(e):e=Hn.from(e,"utf8"),Qt.push(e)}),xe.onClose(function(){se.end(),se.destroy()}),xe.onError(function(t){se.destroy(new Error(t.errMsg))})}function ou(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");const r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt";ru(e);const n=nu(e,t);xe=wx.connectSocket({url:n,protocols:[r]}),Qt=tu(),se=eu.obj(),se._destroy=function(o,s){xe.close({success:function(){s&&s(o)}})};const i=se.destroy;return se.destroy=function(){se.destroy=i;const o=this;setTimeout(function(){xe.close({fail:function(){o._destroy(new Error)}})},0)}.bind(se),iu(),se}var Wn=ou;const{Buffer:Lr}=Ie,su=ke.exports.Transform,au=an;let Oe,_t,Pe,Kn=!1;function lu(){const t=new su;return t._write=function(e,r,n){Oe.sendSocketMessage({data:e.buffer,success:function(){n()},fail:function(){n(new Error)}})},t._flush=function(r){Oe.closeSocket({success:function(){r()}})},t}function fu(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}function uu(t,e){const r=t.protocol==="alis"?"wss":"ws";let n=r+"://"+t.hostname+t.path;return t.port&&t.port!==80&&t.port!==443&&(n=r+"://"+t.hostname+":"+t.port+t.path),typeof t.transformWsUrl=="function"&&(n=t.transformWsUrl(n,t,e)),n}function cu(){Kn||(Kn=!0,Oe.onSocketOpen(function(){Pe.setReadable(_t),Pe.setWritable(_t),Pe.emit("connect")}),Oe.onSocketMessage(function(t){if(typeof t.data=="string"){const e=Lr.from(t.data,"base64");_t.push(e)}else{const e=new FileReader;e.addEventListener("load",function(){let r=e.result;r instanceof ArrayBuffer?r=Lr.from(r):r=Lr.from(r,"utf8"),_t.push(r)}),e.readAsArrayBuffer(t.data)}}),Oe.onSocketClose(function(){Pe.end(),Pe.destroy()}),Oe.onSocketError(function(t){Pe.destroy(t)}))}function hu(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");const r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt";fu(e);const n=uu(e,t);return Oe=e.my,Oe.connectSocket({url:n,protocols:r}),_t=lu(),Pe=au.obj(),cu(),Pe}var Qn=hu,rr={exports:{}},pu=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};const{Buffer:wt}=Ie,Hi=pu,Tt=ye.exports("mqttjs:ws"),du=an,yu=ke.exports.Transform,gu=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],Wi=typeof process!="undefined"&&process.title==="browser"||typeof __webpack_require__=="function";function Ki(t,e){let r=t.protocol+"://"+t.hostname+":"+t.port+t.path;return typeof t.transformWsUrl=="function"&&(r=t.transformWsUrl(r,t,e)),r}function Qi(t){const e=t;return t.hostname||(e.hostname="localhost"),t.port||(t.protocol==="wss"?e.port=443:e.port=80),t.path||(e.path="/"),t.wsOptions||(e.wsOptions={}),!Wi&&t.protocol==="wss"&&gu.forEach(function(r){Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,r)&&(e.wsOptions[r]=t[r])}),e}function vu(t){const e=Qi(t);if(e.hostname||(e.hostname=e.host),!e.hostname){if(typeof document=="undefined")throw new Error("Could not determine host. Specify host manually.");const r=new URL(document.URL);e.hostname=r.hostname,e.port||(e.port=r.port)}return e.objectMode===void 0&&(e.objectMode=!(e.binary===!0||e.binary===void 0)),e}function bu(t,e,r){Tt("createWebSocket"),Tt("protocol: "+r.protocolId+" "+r.protocolVersion);const n=r.protocolId==="MQIsdp"&&r.protocolVersion===3?"mqttv3.1":"mqtt";return Tt("creating new Websocket for url: "+e+" and protocol: "+n),new Hi(e,[n],r.wsOptions)}function wu(t,e){const r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt",n=Ki(e,t),i=new WebSocket(n,[r]);return i.binaryType="arraybuffer",i}function _u(t,e){Tt("streamBuilder");const r=Qi(e),n=Ki(r,t),i=bu(t,n,r),o=Hi.createWebSocketStream(i,r.wsOptions);return o.url=n,i.on("close",()=>{o.destroy()}),o}function mu(t,e){Tt("browserStreamBuilder");let r;const i=vu(e).browserBufferSize||1024*512,o=e.browserBufferTimeout||1e3,s=!e.objectMode,a=wu(t,e),c=g(e,I,B);e.objectMode||(c._writev=E),c.on("close",()=>{a.close()});const l=typeof a.addEventListener!="undefined";a.readyState===a.OPEN?r=c:(r=r=du(void 0,void 0,e),e.objectMode||(r._writev=E),l?a.addEventListener("open",p):a.onopen=p),r.socket=a,l?(a.addEventListener("close",y),a.addEventListener("error",w),a.addEventListener("message",S)):(a.onclose=y,a.onerror=w,a.onmessage=S);function g(h,d,_){const C=new yu({objectModeMode:h.objectMode});return C._write=d,C._flush=_,C}function p(){r.setReadable(c),r.setWritable(c),r.emit("connect")}function y(){r.end(),r.destroy()}function w(h){r.destroy(h)}function S(h){let d=h.data;d instanceof ArrayBuffer?d=wt.from(d):d=wt.from(d,"utf8"),c.push(d)}function E(h,d){const _=new Array(h.length);for(let C=0;C<h.length;C++)typeof h[C].chunk=="string"?_[C]=wt.from(h[C],"utf8"):_[C]=h[C].chunk;this._write(wt.concat(_),"binary",d)}function I(h,d,_){a.bufferedAmount>i&&setTimeout(I,o,h,d,_),s&&typeof h=="string"&&(h=wt.from(h,"utf8"));try{a.send(h)}catch(C){return _(C)}_()}function B(h){a.close(),h()}return r}Wi?rr.exports=mu:rr.exports=_u;const Gi=Bf,Eu=_i,Su=ge,Tu=Wr,Gn=ye.exports("mqttjs"),ie={};typeof process!="undefined"&&process.title!=="browser"||typeof __webpack_require__!="function"?(ie.mqtt=Vn,ie.tcp=Vn,ie.ssl=Or,ie.tls=Or,ie.mqtts=Or):(ie.wx=Wn,ie.wxs=Wn,ie.ali=Qn,ie.alis=Qn);ie.ws=rr.exports;ie.wss=rr.exports;function Cu(t){let e;t.auth&&(e=t.auth.match(/^(.+):(.+)$/),e?(t.username=e[1],t.password=e[2]):t.username=t.auth)}function Yi(t,e){if(Gn("connecting to an MQTT broker..."),typeof t=="object"&&!e&&(e=t,t=null),e=e||{},t){const i=Su.parse(t,!0);if(i.port!=null&&(i.port=Number(i.port)),e=Tu(i,e),e.protocol===null)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(Cu(e),e.query&&typeof e.query.clientId=="string"&&(e.clientId=e.query.clientId),e.cert&&e.key)if(e.protocol){if(["mqtts","wss","wxs","alis"].indexOf(e.protocol)===-1)switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}else throw new Error("Missing secure protocol key");if(!ie[e.protocol]){const i=["mqtts","wss"].indexOf(e.protocol)!==-1;e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(o,s){return i&&s%2===0?!1:typeof ie[o]=="function"})[0]}if(e.clean===!1&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);function r(i){return e.servers&&((!i._reconnectCount||i._reconnectCount===e.servers.length)&&(i._reconnectCount=0),e.host=e.servers[i._reconnectCount].host,e.port=e.servers[i._reconnectCount].port,e.protocol=e.servers[i._reconnectCount].protocol?e.servers[i._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,i._reconnectCount++),Gn("calling streambuilder for",e.protocol),ie[e.protocol](i,e)}const n=new Gi(r,e);return n.on("error",function(){}),n}nr.exports=Yi;var xu=nr.exports.connect=Yi;nr.exports.MqttClient=Gi;nr.exports.Store=Eu;function ku(t){let e,r,n,i,o,s,a,c,l,g,p;return{c(){e=Xe("div"),r=Xe("h1"),n=bn("Or Tapiero Final Project"),i=vr(),o=Xe("div"),s=vr(),a=Xe("div"),c=vr(),l=Xe("div"),g=Xe("h2"),p=bn("Switch On/Off:"),this.h()},l(y){e=Je(y,"DIV",{class:!0});var w=Ze(e);r=Je(w,"H1",{class:!0});var S=Ze(r);n=wn(S,"Or Tapiero Final Project"),S.forEach(oe),w.forEach(oe),i=br(y),o=Je(y,"DIV",{class:!0});var E=Ze(o);E.forEach(oe),s=br(y),a=Je(y,"DIV",{class:!0});var I=Ze(a);I.forEach(oe),c=br(y),l=Je(y,"DIV",{class:!0});var B=Ze(l);g=Je(B,"H2",{});var h=Ze(g);p=wn(h,"Switch On/Off:"),h.forEach(oe),B.forEach(oe),this.h()},h(){vt(r,"class","text-xl"),vt(e,"class","bg-indigo-300 object-cover flex-col p-8 text-center "),vt(o,"class","bg-indigo-300 object-cover flex-col p-8 text-center "),vt(a,"class","bg-indigo-300 object-cover flex-col p-8 text-center "),vt(l,"class","bg-indigo-300 object-cover flex-col p-8 text-center ")},m(y,w){je(y,e,w),Dt(e,r),Dt(r,n),je(y,i,w),je(y,o,w),je(y,s,w),je(y,a,w),je(y,c,w),je(y,l,w),Dt(l,g),Dt(g,p)},p:wr,i:wr,o:wr,d(y){y&&oe(e),y&&oe(i),y&&oe(o),y&&oe(s),y&&oe(a),y&&oe(c),y&&oe(l)}}}function Au(t){var e={host:"a79845304cad415dae16aacfc156b29c.s1.eu.hivemq.cloud",port:8883,protocol:"mqtts",username:"ortapiero",password:"Or!15759363"},r=xu(e),n;return r.on("connect",function(){console.log("Connected")}),r.on("error",function(i){console.log(i)}),r.on("message",function(i,o){n=o.toString(),console.log("Received message:",i,n)}),r.subscribe("temp"),r.publish("temp","Hello"),[]}class Ru extends vo{constructor(e){super(),bo(this,e,Au,ku,wo,{})}}export{Ru as default};
